{"version":3,"file":"component---src-pages-gallery-js-20df56abacbebd5831cd.js","mappings":"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","sources":["webpack://protocol.berlin/./node_modules/yet-another-react-lightbox/dist/types.js","webpack://protocol.berlin/./node_modules/yet-another-react-lightbox/dist/index.js","webpack://protocol.berlin/./node_modules/yet-another-react-lightbox/dist/plugins/zoom/index.js","webpack://protocol.berlin/./src/pages/gallery.js","webpack://protocol.berlin/./node_modules/react-grid-gallery/dist/react-grid-gallery.umd.js"],"sourcesContent":["const MODULE_CAROUSEL = \"carousel\";\nconst MODULE_CONTROLLER = \"controller\";\nconst MODULE_NAVIGATION = \"navigation\";\nconst MODULE_NO_SCROLL = \"no-scroll\";\nconst MODULE_PORTAL = \"portal\";\nconst MODULE_ROOT = \"root\";\nconst MODULE_TOOLBAR = \"toolbar\";\nconst PLUGIN_CAPTIONS = \"captions\";\nconst PLUGIN_COUNTER = \"counter\";\nconst PLUGIN_DOWNLOAD = \"download\";\nconst PLUGIN_FULLSCREEN = \"fullscreen\";\nconst PLUGIN_INLINE = \"inline\";\nconst PLUGIN_SHARE = \"share\";\nconst PLUGIN_SLIDESHOW = \"slideshow\";\nconst PLUGIN_THUMBNAILS = \"thumbnails\";\nconst PLUGIN_ZOOM = \"zoom\";\nconst SLIDE_STATUS_LOADING = \"loading\";\nconst SLIDE_STATUS_PLAYING = \"playing\";\nconst SLIDE_STATUS_ERROR = \"error\";\nconst SLIDE_STATUS_COMPLETE = \"complete\";\nconst SLIDE_STATUS_PLACEHOLDER = \"placeholder\";\nconst activeSlideStatus = (status) => `active-slide-${status}`;\nconst ACTIVE_SLIDE_LOADING = activeSlideStatus(SLIDE_STATUS_LOADING);\nconst ACTIVE_SLIDE_PLAYING = activeSlideStatus(SLIDE_STATUS_PLAYING);\nconst ACTIVE_SLIDE_ERROR = activeSlideStatus(SLIDE_STATUS_ERROR);\nconst ACTIVE_SLIDE_COMPLETE = activeSlideStatus(SLIDE_STATUS_COMPLETE);\nconst CLASS_FULLSIZE = \"fullsize\";\nconst CLASS_FLEX_CENTER = \"flex_center\";\nconst CLASS_NO_SCROLL = \"no_scroll\";\nconst CLASS_NO_SCROLL_PADDING = \"no_scroll_padding\";\nconst ACTION_PREV = \"prev\";\nconst ACTION_NEXT = \"next\";\nconst ACTION_SWIPE = \"swipe\";\nconst ACTION_CLOSE = \"close\";\nconst EVENT_ON_POINTER_DOWN = \"onPointerDown\";\nconst EVENT_ON_POINTER_MOVE = \"onPointerMove\";\nconst EVENT_ON_POINTER_UP = \"onPointerUp\";\nconst EVENT_ON_POINTER_LEAVE = \"onPointerLeave\";\nconst EVENT_ON_POINTER_CANCEL = \"onPointerCancel\";\nconst EVENT_ON_KEY_DOWN = \"onKeyDown\";\nconst EVENT_ON_KEY_UP = \"onKeyUp\";\nconst EVENT_ON_WHEEL = \"onWheel\";\nconst VK_ESCAPE = \"Escape\";\nconst VK_ARROW_LEFT = \"ArrowLeft\";\nconst VK_ARROW_RIGHT = \"ArrowRight\";\nconst ELEMENT_BUTTON = \"button\";\nconst ELEMENT_ICON = \"icon\";\nconst IMAGE_FIT_CONTAIN = \"contain\";\nconst IMAGE_FIT_COVER = \"cover\";\nconst UNKNOWN_ACTION_TYPE = \"Unknown action type\";\n\nexport { ACTION_CLOSE, ACTION_NEXT, ACTION_PREV, ACTION_SWIPE, ACTIVE_SLIDE_COMPLETE, ACTIVE_SLIDE_ERROR, ACTIVE_SLIDE_LOADING, ACTIVE_SLIDE_PLAYING, CLASS_FLEX_CENTER, CLASS_FULLSIZE, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_POINTER_CANCEL, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_WHEEL, IMAGE_FIT_CONTAIN, IMAGE_FIT_COVER, MODULE_CAROUSEL, MODULE_CONTROLLER, MODULE_NAVIGATION, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR, PLUGIN_CAPTIONS, PLUGIN_COUNTER, PLUGIN_DOWNLOAD, PLUGIN_FULLSCREEN, PLUGIN_INLINE, PLUGIN_SHARE, PLUGIN_SLIDESHOW, PLUGIN_THUMBNAILS, PLUGIN_ZOOM, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_LOADING, SLIDE_STATUS_PLACEHOLDER, SLIDE_STATUS_PLAYING, UNKNOWN_ACTION_TYPE, VK_ARROW_LEFT, VK_ARROW_RIGHT, VK_ESCAPE, activeSlideStatus };\n","'use client';\nimport * as React from 'react';\nimport { ACTION_CLOSE, IMAGE_FIT_CONTAIN, MODULE_CONTROLLER, IMAGE_FIT_COVER, UNKNOWN_ACTION_TYPE, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_CANCEL, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_WHEEL, SLIDE_STATUS_LOADING, activeSlideStatus, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_PLACEHOLDER, ACTION_PREV, ACTION_NEXT, ACTION_SWIPE, CLASS_FLEX_CENTER, MODULE_CAROUSEL, CLASS_FULLSIZE, VK_ARROW_RIGHT, VK_ARROW_LEFT, VK_ESCAPE, MODULE_NAVIGATION, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR } from './types.js';\nimport { createPortal } from 'react-dom';\nexport { ACTIVE_SLIDE_COMPLETE, ACTIVE_SLIDE_ERROR, ACTIVE_SLIDE_LOADING, ACTIVE_SLIDE_PLAYING, PLUGIN_CAPTIONS, PLUGIN_COUNTER, PLUGIN_DOWNLOAD, PLUGIN_FULLSCREEN, PLUGIN_INLINE, PLUGIN_SHARE, PLUGIN_SLIDESHOW, PLUGIN_THUMBNAILS, PLUGIN_ZOOM, SLIDE_STATUS_PLAYING } from './types.js';\n\nconst LightboxDefaultProps = {\n    open: false,\n    close: () => { },\n    index: 0,\n    slides: [],\n    render: {},\n    plugins: [],\n    toolbar: { buttons: [ACTION_CLOSE] },\n    labels: {},\n    animation: {\n        fade: 250,\n        swipe: 500,\n        easing: {\n            fade: \"ease\",\n            swipe: \"ease-out\",\n            navigation: \"ease-in-out\",\n        },\n    },\n    carousel: {\n        finite: false,\n        preload: 2,\n        padding: \"16px\",\n        spacing: \"30%\",\n        imageFit: IMAGE_FIT_CONTAIN,\n        imageProps: {},\n    },\n    controller: {\n        ref: null,\n        focus: true,\n        aria: false,\n        touchAction: \"none\",\n        closeOnPullDown: false,\n        closeOnBackdropClick: false,\n    },\n    portal: {},\n    noScroll: {\n        disabled: false,\n    },\n    on: {},\n    styles: {},\n    className: \"\",\n};\n\nfunction createModule(name, component) {\n    return { name, component };\n}\nfunction createNode(module, children) {\n    return { module, children };\n}\nfunction traverseNode(node, target, apply) {\n    if (node.module.name === target) {\n        return apply(node);\n    }\n    if (node.children) {\n        return [\n            createNode(node.module, node.children.flatMap((n) => { var _a; return (_a = traverseNode(n, target, apply)) !== null && _a !== void 0 ? _a : []; })),\n        ];\n    }\n    return [node];\n}\nfunction traverse(nodes, target, apply) {\n    return nodes.flatMap((node) => { var _a; return (_a = traverseNode(node, target, apply)) !== null && _a !== void 0 ? _a : []; });\n}\nfunction withPlugins(root, plugins = [], augmentations = []) {\n    let config = root;\n    const contains = (target) => {\n        const nodes = [...config];\n        while (nodes.length > 0) {\n            const node = nodes.pop();\n            if ((node === null || node === void 0 ? void 0 : node.module.name) === target)\n                return true;\n            if (node === null || node === void 0 ? void 0 : node.children)\n                nodes.push(...node.children);\n        }\n        return false;\n    };\n    const addParent = (target, module) => {\n        if (target === \"\") {\n            config = [createNode(module, config)];\n            return;\n        }\n        config = traverse(config, target, (node) => [createNode(module, [node])]);\n    };\n    const append = (target, module) => {\n        config = traverse(config, target, (node) => [createNode(node.module, [createNode(module, node.children)])]);\n    };\n    const addChild = (target, module, precede) => {\n        config = traverse(config, target, (node) => {\n            var _a;\n            return [\n                createNode(node.module, [\n                    ...(precede ? [createNode(module)] : []),\n                    ...((_a = node.children) !== null && _a !== void 0 ? _a : []),\n                    ...(!precede ? [createNode(module)] : []),\n                ]),\n            ];\n        });\n    };\n    const addSibling = (target, module, precede) => {\n        config = traverse(config, target, (node) => [\n            ...(precede ? [createNode(module)] : []),\n            node,\n            ...(!precede ? [createNode(module)] : []),\n        ]);\n    };\n    const addModule = (module) => {\n        append(MODULE_CONTROLLER, module);\n    };\n    const replace = (target, module) => {\n        config = traverse(config, target, (node) => [createNode(module, node.children)]);\n    };\n    const remove = (target) => {\n        config = traverse(config, target, (node) => node.children);\n    };\n    const augment = (augmentation) => {\n        augmentations.push(augmentation);\n    };\n    plugins.forEach((plugin) => {\n        plugin({\n            contains,\n            addParent,\n            append,\n            addChild,\n            addSibling,\n            addModule,\n            replace,\n            remove,\n            augment,\n        });\n    });\n    return {\n        config,\n        augmentation: (props) => augmentations.reduce((acc, augmentation) => augmentation(acc), props),\n    };\n}\n\nconst clsx = (...classes) => [...classes].filter((cls) => Boolean(cls)).join(\" \");\nconst cssPrefix$3 = \"yarl__\";\nconst cssClass = (name) => `${cssPrefix$3}${name}`;\nconst cssVar = (name) => `--${cssPrefix$3}${name}`;\nconst composePrefix = (base, prefix) => `${base}${prefix ? `_${prefix}` : \"\"}`;\nconst makeComposePrefix = (base) => (prefix) => composePrefix(base, prefix);\nconst label = (labels, lbl) => (labels && labels[lbl] ? labels[lbl] : lbl);\nconst cleanup = (...cleaners) => () => {\n    cleaners.forEach((cleaner) => {\n        cleaner();\n    });\n};\nconst makeUseContext = (name, contextName, context) => () => {\n    const ctx = React.useContext(context);\n    if (!ctx) {\n        throw new Error(`${name} must be used within a ${contextName}.Provider`);\n    }\n    return ctx;\n};\nconst hasWindow = () => typeof window !== \"undefined\";\nfunction round(value, decimals = 0) {\n    const factor = 10 ** decimals;\n    return Math.round((value + Number.EPSILON) * factor) / factor;\n}\nconst isImageSlide = (slide) => slide.type === undefined || slide.type === \"image\";\nconst isImageFitCover = (image, imageFit) => image.imageFit === IMAGE_FIT_COVER || (image.imageFit !== IMAGE_FIT_CONTAIN && imageFit === IMAGE_FIT_COVER);\nfunction parseLengthPercentage(input) {\n    if (typeof input === \"number\") {\n        return { pixel: input };\n    }\n    if (typeof input === \"string\") {\n        const value = parseInt(input, 10);\n        return input.endsWith(\"%\") ? { percent: value } : { pixel: value };\n    }\n    return { pixel: 0 };\n}\nfunction computeSlideRect(containerRect, padding) {\n    const paddingValue = parseLengthPercentage(padding);\n    const paddingPixels = paddingValue.percent !== undefined ? (containerRect.width / 100) * paddingValue.percent : paddingValue.pixel;\n    return {\n        width: Math.max(containerRect.width - 2 * paddingPixels, 0),\n        height: Math.max(containerRect.height - 2 * paddingPixels, 0),\n    };\n}\nconst devicePixelRatio = () => (hasWindow() ? window === null || window === void 0 ? void 0 : window.devicePixelRatio : undefined) || 1;\nconst getSlideIndex = (index, slidesCount) => slidesCount > 0 ? ((index % slidesCount) + slidesCount) % slidesCount : 0;\nconst hasSlides = (slides) => slides.length > 0;\nconst getSlide = (slides, index) => slides[getSlideIndex(index, slides.length)];\nconst getSlideIfPresent = (slides, index) => hasSlides(slides) ? getSlide(slides, index) : undefined;\nfunction addToolbarButton(toolbar, key, button) {\n    if (!button)\n        return toolbar;\n    const { buttons, ...restToolbar } = toolbar;\n    const index = buttons.findIndex((item) => item === key);\n    const buttonWithKey = React.isValidElement(button) ? React.cloneElement(button, { key }, null) : button;\n    if (index >= 0) {\n        const result = [...buttons];\n        result.splice(index, 1, buttonWithKey);\n        return { buttons: result, ...restToolbar };\n    }\n    return { buttons: [buttonWithKey, ...buttons], ...restToolbar };\n}\nfunction stopNavigationEventsPropagation() {\n    const stopPropagation = (event) => {\n        event.stopPropagation();\n    };\n    return { onPointerDown: stopPropagation, onKeyDown: stopPropagation, onWheel: stopPropagation };\n}\nfunction calculatePreload(carousel, slides, minimum = 0) {\n    return Math.min(carousel.preload, Math.max(carousel.finite ? slides.length - 1 : Math.floor(slides.length / 2), minimum));\n}\n\nconst EventsContext = React.createContext(null);\nconst useEvents = makeUseContext(\"useEvents\", \"EventsContext\", EventsContext);\nfunction EventsProvider({ children }) {\n    const [subscriptions] = React.useState({});\n    React.useEffect(() => () => {\n        Object.keys(subscriptions).forEach((topic) => delete subscriptions[topic]);\n    }, [subscriptions]);\n    const context = React.useMemo(() => {\n        const unsubscribe = (topic, callback) => {\n            var _a;\n            (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.splice(0, subscriptions[topic].length, ...subscriptions[topic].filter((cb) => cb !== callback));\n        };\n        const subscribe = (topic, callback) => {\n            if (!subscriptions[topic]) {\n                subscriptions[topic] = [];\n            }\n            subscriptions[topic].push(callback);\n            return () => unsubscribe(topic, callback);\n        };\n        const publish = (...[topic, event]) => {\n            var _a;\n            (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.forEach((callback) => callback(event));\n        };\n        return { publish, subscribe, unsubscribe };\n    }, [subscriptions]);\n    return React.createElement(EventsContext.Provider, { value: context }, children);\n}\n\nconst LightboxPropsContext = React.createContext(null);\nconst useLightboxProps = makeUseContext(\"useLightboxProps\", \"LightboxPropsContext\", LightboxPropsContext);\nfunction LightboxPropsProvider({ children, ...props }) {\n    return React.createElement(LightboxPropsContext.Provider, { value: props }, children);\n}\n\nconst LightboxStateContext = React.createContext(null);\nconst useLightboxState = makeUseContext(\"useLightboxState\", \"LightboxStateContext\", LightboxStateContext);\nconst LightboxDispatchContext = React.createContext(null);\nconst useLightboxDispatch = makeUseContext(\"useLightboxDispatch\", \"LightboxDispatchContext\", LightboxDispatchContext);\nfunction reducer(state, action) {\n    switch (action.type) {\n        case \"swipe\": {\n            const { slides } = state;\n            const increment = (action === null || action === void 0 ? void 0 : action.increment) || 0;\n            const globalIndex = state.globalIndex + increment;\n            const currentIndex = getSlideIndex(globalIndex, slides.length);\n            const currentSlide = getSlideIfPresent(slides, currentIndex);\n            const animation = increment || action.duration\n                ? {\n                    increment,\n                    duration: action.duration,\n                    easing: action.easing,\n                }\n                : undefined;\n            return { slides, currentIndex, globalIndex, currentSlide, animation };\n        }\n        case \"update\":\n            return {\n                slides: action.slides,\n                currentIndex: action.index,\n                globalIndex: action.index,\n                currentSlide: getSlideIfPresent(action.slides, action.index),\n            };\n        default:\n            throw new Error(UNKNOWN_ACTION_TYPE);\n    }\n}\nfunction LightboxStateProvider({ slides, index, children }) {\n    const [state, dispatch] = React.useReducer(reducer, {\n        slides,\n        currentIndex: index,\n        globalIndex: index,\n        currentSlide: getSlideIfPresent(slides, index),\n    });\n    React.useEffect(() => {\n        dispatch({ type: \"update\", slides, index });\n    }, [slides, index]);\n    const context = React.useMemo(() => ({ ...state, state, dispatch }), [state, dispatch]);\n    return (React.createElement(LightboxDispatchContext.Provider, { value: dispatch },\n        React.createElement(LightboxStateContext.Provider, { value: context }, children)));\n}\n\nconst TimeoutsContext = React.createContext(null);\nconst useTimeouts = makeUseContext(\"useTimeouts\", \"TimeoutsContext\", TimeoutsContext);\nfunction TimeoutsProvider({ children }) {\n    const [timeouts] = React.useState([]);\n    React.useEffect(() => () => {\n        timeouts.forEach((tid) => window.clearTimeout(tid));\n        timeouts.splice(0, timeouts.length);\n    }, [timeouts]);\n    const context = React.useMemo(() => {\n        const removeTimeout = (id) => {\n            timeouts.splice(0, timeouts.length, ...timeouts.filter((tid) => tid !== id));\n        };\n        const setTimeout = (fn, delay) => {\n            const id = window.setTimeout(() => {\n                removeTimeout(id);\n                fn();\n            }, delay);\n            timeouts.push(id);\n            return id;\n        };\n        const clearTimeout = (id) => {\n            if (id !== undefined) {\n                removeTimeout(id);\n                window.clearTimeout(id);\n            }\n        };\n        return { setTimeout, clearTimeout };\n    }, [timeouts]);\n    return React.createElement(TimeoutsContext.Provider, { value: context }, children);\n}\n\nconst IconButton = React.forwardRef(function IconButton({ label: label$1, className, icon: Icon, renderIcon, onClick, style, ...rest }, ref) {\n    const { styles, labels } = useLightboxProps();\n    return (React.createElement(\"button\", { ref: ref, type: \"button\", \"aria-label\": label(labels, label$1), className: clsx(cssClass(ELEMENT_BUTTON), className), onClick: onClick, style: { ...style, ...styles.button }, ...rest }, renderIcon ? renderIcon() : React.createElement(Icon, { className: cssClass(ELEMENT_ICON), style: styles.icon })));\n});\n\nfunction svgIcon(name, children) {\n    const icon = (props) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"24\", height: \"24\", \"aria-hidden\": \"true\", focusable: \"false\", ...props }, children));\n    icon.displayName = name;\n    return icon;\n}\nfunction createIcon(name, glyph) {\n    return svgIcon(name, React.createElement(\"g\", { fill: \"currentColor\" },\n        React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n        glyph));\n}\nfunction createIconDisabled(name, glyph) {\n    return svgIcon(name, React.createElement(React.Fragment, null,\n        React.createElement(\"defs\", null,\n            React.createElement(\"mask\", { id: \"strike\" },\n                React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"white\" }),\n                React.createElement(\"path\", { d: \"M0 0L24 24\", stroke: \"black\", strokeWidth: 4 }))),\n        React.createElement(\"path\", { d: \"M0.70707 2.121320L21.878680 23.292883\", stroke: \"currentColor\", strokeWidth: 2 }),\n        React.createElement(\"g\", { fill: \"currentColor\", mask: \"url(#strike)\" },\n            React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n            glyph)));\n}\nconst CloseIcon = createIcon(\"Close\", React.createElement(\"path\", { d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" }));\nconst PreviousIcon = createIcon(\"Previous\", React.createElement(\"path\", { d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\" }));\nconst NextIcon = createIcon(\"Next\", React.createElement(\"path\", { d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\" }));\nconst LoadingIcon = createIcon(\"Loading\", React.createElement(React.Fragment, null, Array.from({ length: 8 }).map((_, index, array) => (React.createElement(\"line\", { key: index, x1: \"12\", y1: \"6.5\", x2: \"12\", y2: \"1.8\", strokeLinecap: \"round\", strokeWidth: \"2.6\", stroke: \"currentColor\", strokeOpacity: (1 / array.length) * (index + 1), transform: `rotate(${(360 / array.length) * index}, 12, 12)` })))));\nconst ErrorIcon = createIcon(\"Error\", React.createElement(\"path\", { d: \"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z\" }));\n\nconst useLayoutEffect = hasWindow() ? React.useLayoutEffect : React.useEffect;\n\nfunction useMotionPreference() {\n    const [reduceMotion, setReduceMotion] = React.useState(false);\n    React.useEffect(() => {\n        var _a, _b;\n        const mediaQuery = (_a = window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, \"(prefers-reduced-motion: reduce)\");\n        setReduceMotion(mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.matches);\n        const listener = (event) => setReduceMotion(event.matches);\n        (_b = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.addEventListener) === null || _b === void 0 ? void 0 : _b.call(mediaQuery, \"change\", listener);\n        return () => { var _a; return (_a = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.removeEventListener) === null || _a === void 0 ? void 0 : _a.call(mediaQuery, \"change\", listener); };\n    }, []);\n    return reduceMotion;\n}\n\nfunction currentTransformation(node) {\n    let x = 0;\n    let y = 0;\n    let z = 0;\n    const matrix = window.getComputedStyle(node).transform;\n    const matcher = matrix.match(/matrix.*\\((.+)\\)/);\n    if (matcher) {\n        const values = matcher[1].split(\",\").map((str) => Number.parseInt(str, 10));\n        if (values.length === 6) {\n            x = values[4];\n            y = values[5];\n        }\n        else if (values.length === 16) {\n            x = values[12];\n            y = values[13];\n            z = values[14];\n        }\n    }\n    return { x, y, z };\n}\nfunction useAnimation(nodeRef, computeAnimation) {\n    const snapshot = React.useRef();\n    const animation = React.useRef();\n    const reduceMotion = useMotionPreference();\n    useLayoutEffect(() => {\n        var _a, _b, _c;\n        if (nodeRef.current && snapshot.current !== undefined && !reduceMotion) {\n            const { keyframes, duration, easing, onfinish } = computeAnimation(snapshot.current, nodeRef.current.getBoundingClientRect(), currentTransformation(nodeRef.current)) || {};\n            if (keyframes && duration) {\n                (_a = animation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n                animation.current = undefined;\n                try {\n                    animation.current = (_c = (_b = nodeRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, keyframes, { duration, easing });\n                }\n                catch (err) {\n                    console.error(err);\n                }\n                if (animation.current) {\n                    animation.current.onfinish = () => {\n                        animation.current = undefined;\n                        onfinish === null || onfinish === void 0 ? void 0 : onfinish();\n                    };\n                }\n            }\n        }\n        snapshot.current = undefined;\n    });\n    return {\n        prepareAnimation: (currentSnapshot) => {\n            snapshot.current = currentSnapshot;\n        },\n        isAnimationPlaying: () => { var _a; return ((_a = animation.current) === null || _a === void 0 ? void 0 : _a.playState) === \"running\"; },\n    };\n}\n\nfunction useContainerRect() {\n    const containerRef = React.useRef(null);\n    const observerRef = React.useRef();\n    const [containerRect, setContainerRect] = React.useState();\n    const setContainerRef = React.useCallback((node) => {\n        containerRef.current = node;\n        if (observerRef.current) {\n            observerRef.current.disconnect();\n            observerRef.current = undefined;\n        }\n        const updateContainerRect = () => {\n            if (node) {\n                const styles = window.getComputedStyle(node);\n                const parse = (value) => parseFloat(value) || 0;\n                setContainerRect({\n                    width: Math.round(node.clientWidth - parse(styles.paddingLeft) - parse(styles.paddingRight)),\n                    height: Math.round(node.clientHeight - parse(styles.paddingTop) - parse(styles.paddingBottom)),\n                });\n            }\n            else {\n                setContainerRect(undefined);\n            }\n        };\n        updateContainerRect();\n        if (node && typeof ResizeObserver !== \"undefined\") {\n            observerRef.current = new ResizeObserver(updateContainerRect);\n            observerRef.current.observe(node);\n        }\n    }, []);\n    return { setContainerRef, containerRef, containerRect };\n}\n\nfunction useDelay() {\n    const timeoutId = React.useRef();\n    const { setTimeout, clearTimeout } = useTimeouts();\n    return React.useCallback((callback, delay) => {\n        clearTimeout(timeoutId.current);\n        timeoutId.current = setTimeout(callback, delay > 0 ? delay : 0);\n    }, [setTimeout, clearTimeout]);\n}\n\nfunction useEventCallback(fn) {\n    const ref = React.useRef(fn);\n    useLayoutEffect(() => {\n        ref.current = fn;\n    });\n    return React.useCallback((...args) => { var _a; return (_a = ref.current) === null || _a === void 0 ? void 0 : _a.call(ref, ...args); }, []);\n}\n\nfunction setRef(ref, value) {\n    if (typeof ref === \"function\") {\n        ref(value);\n    }\n    else if (ref) {\n        ref.current = value;\n    }\n}\nfunction useForkRef(refA, refB) {\n    return React.useMemo(() => refA == null && refB == null\n        ? null\n        : (refValue) => {\n            setRef(refA, refValue);\n            setRef(refB, refValue);\n        }, [refA, refB]);\n}\n\nfunction useLoseFocus(focus, disabled = false) {\n    const focused = React.useRef();\n    useLayoutEffect(() => {\n        if (disabled && focused.current) {\n            focused.current = false;\n            focus();\n        }\n    }, [disabled, focus]);\n    const onFocus = React.useCallback(() => {\n        focused.current = true;\n    }, []);\n    const onBlur = React.useCallback(() => {\n        focused.current = false;\n    }, []);\n    return { onFocus, onBlur };\n}\n\nfunction useRTL() {\n    const [isRTL, setIsRTL] = React.useState(false);\n    useLayoutEffect(() => {\n        setIsRTL(window.getComputedStyle(window.document.documentElement).direction === \"rtl\");\n    }, []);\n    return isRTL;\n}\n\nfunction useSensors() {\n    const [subscribers] = React.useState({});\n    const notifySubscribers = React.useCallback((type, event) => {\n        var _a;\n        (_a = subscribers[type]) === null || _a === void 0 ? void 0 : _a.forEach((listener) => {\n            if (!event.isPropagationStopped())\n                listener(event);\n        });\n    }, [subscribers]);\n    const registerSensors = React.useMemo(() => ({\n        onPointerDown: (event) => notifySubscribers(EVENT_ON_POINTER_DOWN, event),\n        onPointerMove: (event) => notifySubscribers(EVENT_ON_POINTER_MOVE, event),\n        onPointerUp: (event) => notifySubscribers(EVENT_ON_POINTER_UP, event),\n        onPointerLeave: (event) => notifySubscribers(EVENT_ON_POINTER_LEAVE, event),\n        onPointerCancel: (event) => notifySubscribers(EVENT_ON_POINTER_CANCEL, event),\n        onKeyDown: (event) => notifySubscribers(EVENT_ON_KEY_DOWN, event),\n        onKeyUp: (event) => notifySubscribers(EVENT_ON_KEY_UP, event),\n        onWheel: (event) => notifySubscribers(EVENT_ON_WHEEL, event),\n    }), [notifySubscribers]);\n    const subscribeSensors = React.useCallback((type, callback) => {\n        if (!subscribers[type]) {\n            subscribers[type] = [];\n        }\n        subscribers[type].unshift(callback);\n        return () => {\n            const listeners = subscribers[type];\n            if (listeners) {\n                listeners.splice(0, listeners.length, ...listeners.filter((el) => el !== callback));\n            }\n        };\n    }, [subscribers]);\n    return { registerSensors, subscribeSensors };\n}\n\nfunction useThrottle(callback, delay) {\n    const lastCallbackTime = React.useRef(0);\n    const delayCallback = useDelay();\n    const executeCallback = useEventCallback((...args) => {\n        lastCallbackTime.current = Date.now();\n        callback(args);\n    });\n    return React.useCallback((...args) => {\n        delayCallback(() => {\n            executeCallback(args);\n        }, delay - (Date.now() - lastCallbackTime.current));\n    }, [delay, executeCallback, delayCallback]);\n}\n\nconst slidePrefix = makeComposePrefix(\"slide\");\nconst slideImagePrefix = makeComposePrefix(\"slide_image\");\nfunction ImageSlide({ slide: image, offset, render, rect, imageFit, imageProps, onClick, onLoad, style, }) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const [status, setStatus] = React.useState(SLIDE_STATUS_LOADING);\n    const { publish } = useEvents();\n    const { setTimeout } = useTimeouts();\n    const imageRef = React.useRef(null);\n    React.useEffect(() => {\n        if (offset === 0) {\n            publish(activeSlideStatus(status));\n        }\n    }, [offset, status, publish]);\n    const handleLoading = useEventCallback((img) => {\n        (\"decode\" in img ? img.decode() : Promise.resolve())\n            .catch(() => { })\n            .then(() => {\n            if (!img.parentNode) {\n                return;\n            }\n            setStatus(SLIDE_STATUS_COMPLETE);\n            setTimeout(() => {\n                onLoad === null || onLoad === void 0 ? void 0 : onLoad(img);\n            }, 0);\n        });\n    });\n    const setImageRef = React.useCallback((img) => {\n        imageRef.current = img;\n        if (img === null || img === void 0 ? void 0 : img.complete) {\n            handleLoading(img);\n        }\n    }, [handleLoading]);\n    const handleOnLoad = React.useCallback((event) => {\n        handleLoading(event.currentTarget);\n    }, [handleLoading]);\n    const onError = React.useCallback(() => {\n        setStatus(SLIDE_STATUS_ERROR);\n    }, []);\n    const cover = isImageFitCover(image, imageFit);\n    const nonInfinite = (value, fallback) => (Number.isFinite(value) ? value : fallback);\n    const maxWidth = nonInfinite(Math.max(...((_b = (_a = image.srcSet) === null || _a === void 0 ? void 0 : _a.map((x) => x.width)) !== null && _b !== void 0 ? _b : []).concat(image.width ? [image.width] : []).filter(Boolean)), ((_c = imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalWidth) || 0);\n    const maxHeight = nonInfinite(Math.max(...((_e = (_d = image.srcSet) === null || _d === void 0 ? void 0 : _d.map((x) => x.height)) !== null && _e !== void 0 ? _e : []).concat(image.height ? [image.height] : []).filter(Boolean)), ((_f = imageRef.current) === null || _f === void 0 ? void 0 : _f.naturalHeight) || 0);\n    const defaultStyle = maxWidth && maxHeight\n        ? {\n            maxWidth: `min(${maxWidth}px, 100%)`,\n            maxHeight: `min(${maxHeight}px, 100%)`,\n        }\n        : {\n            maxWidth: \"100%\",\n            maxHeight: \"100%\",\n        };\n    const srcSet = (_g = image.srcSet) === null || _g === void 0 ? void 0 : _g.sort((a, b) => a.width - b.width).map((item) => `${item.src} ${item.width}w`).join(\", \");\n    const estimateActualWidth = () => rect && !cover && image.width && image.height ? (rect.height / image.height) * image.width : Number.MAX_VALUE;\n    const sizes = srcSet && rect && hasWindow() ? `${Math.round(Math.min(estimateActualWidth(), rect.width))}px` : undefined;\n    const { style: imagePropsStyle, className: imagePropsClassName, ...restImageProps } = imageProps || {};\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"img\", { ref: setImageRef, onLoad: handleOnLoad, onError: onError, onClick: onClick, draggable: false, className: clsx(cssClass(slideImagePrefix()), cover && cssClass(slideImagePrefix(\"cover\")), status !== SLIDE_STATUS_COMPLETE && cssClass(slideImagePrefix(\"loading\")), imagePropsClassName), style: { ...defaultStyle, ...style, ...imagePropsStyle }, ...restImageProps, alt: image.alt, sizes: sizes, srcSet: srcSet, src: image.src }),\n        status !== SLIDE_STATUS_COMPLETE && (React.createElement(\"div\", { className: cssClass(slidePrefix(SLIDE_STATUS_PLACEHOLDER)) },\n            status === SLIDE_STATUS_LOADING &&\n                ((render === null || render === void 0 ? void 0 : render.iconLoading) ? (render.iconLoading()) : (React.createElement(LoadingIcon, { className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_LOADING))) }))),\n            status === SLIDE_STATUS_ERROR &&\n                ((render === null || render === void 0 ? void 0 : render.iconError) ? (render.iconError()) : (React.createElement(ErrorIcon, { className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_ERROR))) })))))));\n}\n\nvar SwipeState;\n(function (SwipeState) {\n    SwipeState[SwipeState[\"NONE\"] = 0] = \"NONE\";\n    SwipeState[SwipeState[\"SWIPE\"] = 1] = \"SWIPE\";\n    SwipeState[SwipeState[\"PULL_DOWN\"] = 2] = \"PULL_DOWN\";\n    SwipeState[SwipeState[\"ANIMATION\"] = 3] = \"ANIMATION\";\n})(SwipeState || (SwipeState = {}));\n\nfunction usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled) {\n    React.useEffect(() => !disabled\n        ? cleanup(subscribeSensors(EVENT_ON_POINTER_DOWN, onPointerDown), subscribeSensors(EVENT_ON_POINTER_MOVE, onPointerMove), subscribeSensors(EVENT_ON_POINTER_UP, onPointerUp), subscribeSensors(EVENT_ON_POINTER_LEAVE, onPointerUp), subscribeSensors(EVENT_ON_POINTER_CANCEL, onPointerUp))\n        : () => { }, [subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled]);\n}\n\nvar Gesture;\n(function (Gesture) {\n    Gesture[Gesture[\"NONE\"] = 0] = \"NONE\";\n    Gesture[Gesture[\"SWIPE\"] = 1] = \"SWIPE\";\n    Gesture[Gesture[\"PULL_DOWN\"] = 2] = \"PULL_DOWN\";\n})(Gesture || (Gesture = {}));\nconst SWIPE_THRESHOLD = 30;\nfunction usePointerSwipe(subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel, pullDownEnabled, onPullDownStart, onPullDownProgress, onPullDownFinish, onPullDownCancel) {\n    const offset = React.useRef(0);\n    const pointers = React.useRef([]);\n    const activePointer = React.useRef();\n    const startTime = React.useRef(0);\n    const gesture = React.useRef(Gesture.NONE);\n    const clearPointer = React.useCallback((event) => {\n        if (activePointer.current === event.pointerId) {\n            activePointer.current = undefined;\n            gesture.current = Gesture.NONE;\n        }\n        const currentPointers = pointers.current;\n        currentPointers.splice(0, currentPointers.length, ...currentPointers.filter((p) => p.pointerId !== event.pointerId));\n    }, []);\n    const addPointer = React.useCallback((event) => {\n        clearPointer(event);\n        event.persist();\n        pointers.current.push(event);\n    }, [clearPointer]);\n    const onPointerDown = useEventCallback((event) => {\n        addPointer(event);\n    });\n    const onPointerUp = useEventCallback((event) => {\n        if (pointers.current.find((x) => x.pointerId === event.pointerId) &&\n            activePointer.current === event.pointerId) {\n            const duration = Date.now() - startTime.current;\n            const currentOffset = offset.current;\n            if (gesture.current === Gesture.SWIPE) {\n                if (Math.abs(currentOffset) > 0.3 * containerWidth ||\n                    (Math.abs(currentOffset) > 5 && duration < swipeAnimationDuration)) {\n                    onSwipeFinish(currentOffset, duration);\n                }\n                else {\n                    onSwipeCancel(currentOffset);\n                }\n            }\n            else if (gesture.current === Gesture.PULL_DOWN) {\n                if (currentOffset > 2 * SWIPE_THRESHOLD) {\n                    onPullDownFinish(currentOffset, duration);\n                }\n                else {\n                    onPullDownCancel(currentOffset);\n                }\n            }\n            offset.current = 0;\n            gesture.current = Gesture.NONE;\n        }\n        clearPointer(event);\n    });\n    const onPointerMove = useEventCallback((event) => {\n        const pointer = pointers.current.find((p) => p.pointerId === event.pointerId);\n        if (pointer) {\n            const isCurrentPointer = activePointer.current === event.pointerId;\n            if (event.buttons === 0) {\n                if (isCurrentPointer && offset.current !== 0) {\n                    onPointerUp(event);\n                }\n                else {\n                    clearPointer(pointer);\n                }\n                return;\n            }\n            const deltaX = event.clientX - pointer.clientX;\n            const deltaY = event.clientY - pointer.clientY;\n            if (activePointer.current === undefined) {\n                const startGesture = (newGesture) => {\n                    addPointer(event);\n                    activePointer.current = event.pointerId;\n                    startTime.current = Date.now();\n                    gesture.current = newGesture;\n                };\n                if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > SWIPE_THRESHOLD && isSwipeValid(deltaX)) {\n                    startGesture(Gesture.SWIPE);\n                    onSwipeStart();\n                }\n                else if (pullDownEnabled && Math.abs(deltaY) > Math.abs(deltaX) && deltaY > SWIPE_THRESHOLD) {\n                    startGesture(Gesture.PULL_DOWN);\n                    onPullDownStart();\n                }\n            }\n            else if (isCurrentPointer) {\n                if (gesture.current === Gesture.SWIPE) {\n                    offset.current = deltaX;\n                    onSwipeProgress(deltaX);\n                }\n                else if (gesture.current === Gesture.PULL_DOWN) {\n                    offset.current = deltaY;\n                    onPullDownProgress(deltaY);\n                }\n            }\n        }\n    });\n    usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp);\n}\n\nconst WHEEL = \"wheel\";\nfunction preventDefault(event) {\n    if (Math.abs(event.deltaX) > Math.abs(event.deltaY) || event.ctrlKey) {\n        event.preventDefault();\n    }\n}\nfunction usePreventSwipeNavigation() {\n    const ref = React.useRef(null);\n    return React.useCallback((node) => {\n        var _a;\n        if (node) {\n            node.addEventListener(WHEEL, preventDefault, { passive: false });\n        }\n        else {\n            (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeEventListener(WHEEL, preventDefault);\n        }\n        ref.current = node;\n    }, []);\n}\n\nfunction useWheelSwipe(swipeState, subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel) {\n    const offset = React.useRef(0);\n    const intent = React.useRef(0);\n    const intentCleanup = React.useRef();\n    const resetCleanup = React.useRef();\n    const wheelResidualMomentum = React.useRef(0);\n    const startTime = React.useRef(0);\n    const { setTimeout, clearTimeout } = useTimeouts();\n    const cancelSwipeIntentCleanup = React.useCallback(() => {\n        if (intentCleanup.current) {\n            clearTimeout(intentCleanup.current);\n            intentCleanup.current = undefined;\n        }\n    }, [clearTimeout]);\n    const cancelSwipeResetCleanup = React.useCallback(() => {\n        if (resetCleanup.current) {\n            clearTimeout(resetCleanup.current);\n            resetCleanup.current = undefined;\n        }\n    }, [clearTimeout]);\n    const handleCleanup = useEventCallback(() => {\n        if (swipeState !== SwipeState.SWIPE) {\n            offset.current = 0;\n            startTime.current = 0;\n            cancelSwipeIntentCleanup();\n            cancelSwipeResetCleanup();\n        }\n    });\n    React.useEffect(handleCleanup, [swipeState, handleCleanup]);\n    const handleCancelSwipe = useEventCallback((currentSwipeOffset) => {\n        resetCleanup.current = undefined;\n        if (offset.current === currentSwipeOffset) {\n            onSwipeCancel(offset.current);\n        }\n    });\n    const onWheel = useEventCallback((event) => {\n        if (event.ctrlKey) {\n            return;\n        }\n        if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n            return;\n        }\n        if (swipeState === SwipeState.NONE) {\n            if (Math.abs(event.deltaX) <= 1.2 * Math.abs(wheelResidualMomentum.current)) {\n                wheelResidualMomentum.current = event.deltaX;\n                return;\n            }\n            if (!isSwipeValid(-event.deltaX)) {\n                return;\n            }\n            intent.current += event.deltaX;\n            cancelSwipeIntentCleanup();\n            if (Math.abs(intent.current) > 30) {\n                intent.current = 0;\n                wheelResidualMomentum.current = 0;\n                startTime.current = Date.now();\n                onSwipeStart();\n            }\n            else {\n                const currentSwipeIntent = intent.current;\n                intentCleanup.current = setTimeout(() => {\n                    intentCleanup.current = undefined;\n                    if (currentSwipeIntent === intent.current) {\n                        intent.current = 0;\n                    }\n                }, swipeAnimationDuration);\n            }\n        }\n        else if (swipeState === SwipeState.SWIPE) {\n            let newSwipeOffset = offset.current - event.deltaX;\n            newSwipeOffset = Math.min(Math.abs(newSwipeOffset), containerWidth) * Math.sign(newSwipeOffset);\n            offset.current = newSwipeOffset;\n            onSwipeProgress(newSwipeOffset);\n            cancelSwipeResetCleanup();\n            if (Math.abs(newSwipeOffset) > 0.2 * containerWidth) {\n                wheelResidualMomentum.current = event.deltaX;\n                onSwipeFinish(newSwipeOffset, Date.now() - startTime.current);\n                return;\n            }\n            resetCleanup.current = setTimeout(() => handleCancelSwipe(newSwipeOffset), 2 * swipeAnimationDuration);\n        }\n        else {\n            wheelResidualMomentum.current = event.deltaX;\n        }\n    });\n    React.useEffect(() => subscribeSensors(EVENT_ON_WHEEL, onWheel), [subscribeSensors, onWheel]);\n}\n\nconst cssContainerPrefix = makeComposePrefix(\"container\");\nconst ControllerContext = React.createContext(null);\nconst useController = makeUseContext(\"useController\", \"ControllerContext\", ControllerContext);\nfunction Controller({ children, ...props }) {\n    var _a;\n    const { carousel, animation, controller, on, styles, render } = props;\n    const [toolbarWidth, setToolbarWidth] = React.useState();\n    const state = useLightboxState();\n    const dispatch = useLightboxDispatch();\n    const [swipeState, setSwipeState] = React.useState(SwipeState.NONE);\n    const swipeOffset = React.useRef(0);\n    const pullDownOffset = React.useRef(0);\n    const pullDownOpacity = React.useRef(1);\n    const { registerSensors, subscribeSensors } = useSensors();\n    const { subscribe, publish } = useEvents();\n    const cleanupAnimationIncrement = useDelay();\n    const cleanupSwipeOffset = useDelay();\n    const cleanupPullDownOffset = useDelay();\n    const { containerRef, setContainerRef, containerRect } = useContainerRect();\n    const handleContainerRef = useForkRef(usePreventSwipeNavigation(), setContainerRef);\n    const carouselRef = React.useRef(null);\n    const setCarouselRef = useForkRef(carouselRef, undefined);\n    const isRTL = useRTL();\n    const rtl = (value) => (isRTL ? -1 : 1) * (typeof value === \"number\" ? value : 1);\n    const focus = useEventCallback(() => { var _a; return (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus(); });\n    const getLightboxProps = useEventCallback(() => props);\n    const getLightboxState = useEventCallback(() => state);\n    const prev = React.useCallback((params) => publish(ACTION_PREV, params), [publish]);\n    const next = React.useCallback((params) => publish(ACTION_NEXT, params), [publish]);\n    const close = React.useCallback(() => publish(ACTION_CLOSE), [publish]);\n    const isSwipeValid = (offset) => !(carousel.finite &&\n        ((rtl(offset) > 0 && state.currentIndex === 0) ||\n            (rtl(offset) < 0 && state.currentIndex === state.slides.length - 1)));\n    const setSwipeOffset = (offset) => {\n        var _a;\n        swipeOffset.current = offset;\n        (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"swipe_offset\"), `${Math.round(offset)}px`);\n    };\n    const { closeOnPullDown } = controller;\n    const setPullDownOffset = (offset) => {\n        var _a, _b;\n        pullDownOffset.current = offset;\n        pullDownOpacity.current = (() => {\n            const threshold = 60;\n            const minOpacity = 0.5;\n            return Math.min(Math.max(round(1 - (offset / threshold) * (1 - minOpacity), 2), minOpacity), 1);\n        })();\n        (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"pull_down_offset\"), `${Math.round(offset)}px`);\n        (_b = containerRef.current) === null || _b === void 0 ? void 0 : _b.style.setProperty(cssVar(\"pull_down_opacity\"), `${pullDownOpacity.current}`);\n    };\n    const { prepareAnimation: preparePullDownAnimation } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n        if (carouselRef.current && containerRect) {\n            return {\n                keyframes: [\n                    {\n                        transform: `translate(0, ${snapshot.rect.y - rect.y + translate.y}px)`,\n                        opacity: snapshot.opacity,\n                    },\n                    { transform: \"translate(0, 0)\", opacity: 1 },\n                ],\n                duration: snapshot.duration,\n                easing: animation.easing.fade,\n            };\n        }\n        return undefined;\n    });\n    const pullDown = (offset, cancel) => {\n        if (closeOnPullDown) {\n            setPullDownOffset(offset);\n            let duration = 0;\n            if (carouselRef.current) {\n                duration = animation.fade * (cancel ? 2 : 1);\n                preparePullDownAnimation({\n                    rect: carouselRef.current.getBoundingClientRect(),\n                    opacity: pullDownOpacity.current,\n                    duration,\n                });\n            }\n            cleanupPullDownOffset(() => {\n                setPullDownOffset(0);\n                setSwipeState(SwipeState.NONE);\n            }, duration);\n            setSwipeState(SwipeState.ANIMATION);\n            if (!cancel) {\n                close();\n            }\n        }\n    };\n    const { prepareAnimation, isAnimationPlaying } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n        var _a;\n        if (carouselRef.current && containerRect && ((_a = state.animation) === null || _a === void 0 ? void 0 : _a.duration)) {\n            const parsedSpacing = parseLengthPercentage(carousel.spacing);\n            const spacingValue = (parsedSpacing.percent\n                ? (parsedSpacing.percent * containerRect.width) / 100\n                : parsedSpacing.pixel) || 0;\n            return {\n                keyframes: [\n                    {\n                        transform: `translate(${rtl(state.globalIndex - snapshot.index) * (containerRect.width + spacingValue) +\n                            snapshot.rect.x -\n                            rect.x +\n                            translate.x}px, 0)`,\n                    },\n                    { transform: \"translate(0, 0)\" },\n                ],\n                duration: state.animation.duration,\n                easing: state.animation.easing,\n            };\n        }\n        return undefined;\n    });\n    const swipe = useEventCallback((action) => {\n        var _a, _b;\n        const currentSwipeOffset = action.offset || 0;\n        const swipeDuration = !currentSwipeOffset ? (_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe : animation.swipe;\n        const swipeEasing = !currentSwipeOffset && !isAnimationPlaying() ? animation.easing.navigation : animation.easing.swipe;\n        let { direction } = action;\n        const count = (_b = action.count) !== null && _b !== void 0 ? _b : 1;\n        let newSwipeState = SwipeState.ANIMATION;\n        let newSwipeAnimationDuration = swipeDuration * count;\n        if (!direction) {\n            const containerWidth = containerRect === null || containerRect === void 0 ? void 0 : containerRect.width;\n            const elapsedTime = action.duration || 0;\n            const expectedTime = containerWidth\n                ? (swipeDuration / containerWidth) * Math.abs(currentSwipeOffset)\n                : swipeDuration;\n            if (count !== 0) {\n                if (elapsedTime < expectedTime) {\n                    newSwipeAnimationDuration =\n                        (newSwipeAnimationDuration / expectedTime) * Math.max(elapsedTime, expectedTime / 5);\n                }\n                else if (containerWidth) {\n                    newSwipeAnimationDuration =\n                        (swipeDuration / containerWidth) * (containerWidth - Math.abs(currentSwipeOffset));\n                }\n                direction = rtl(currentSwipeOffset) > 0 ? ACTION_PREV : ACTION_NEXT;\n            }\n            else {\n                newSwipeAnimationDuration = swipeDuration / 2;\n            }\n        }\n        let increment = 0;\n        if (direction === ACTION_PREV) {\n            if (isSwipeValid(rtl(1))) {\n                increment = -count;\n            }\n            else {\n                newSwipeState = SwipeState.NONE;\n                newSwipeAnimationDuration = swipeDuration;\n            }\n        }\n        else if (direction === ACTION_NEXT) {\n            if (isSwipeValid(rtl(-1))) {\n                increment = count;\n            }\n            else {\n                newSwipeState = SwipeState.NONE;\n                newSwipeAnimationDuration = swipeDuration;\n            }\n        }\n        newSwipeAnimationDuration = Math.round(newSwipeAnimationDuration);\n        cleanupSwipeOffset(() => {\n            setSwipeOffset(0);\n            setSwipeState(SwipeState.NONE);\n        }, newSwipeAnimationDuration);\n        if (carouselRef.current) {\n            prepareAnimation({\n                rect: carouselRef.current.getBoundingClientRect(),\n                index: state.globalIndex,\n            });\n        }\n        setSwipeState(newSwipeState);\n        publish(ACTION_SWIPE, {\n            type: \"swipe\",\n            increment,\n            duration: newSwipeAnimationDuration,\n            easing: swipeEasing,\n        });\n    });\n    React.useEffect(() => {\n        var _a, _b;\n        if (((_a = state.animation) === null || _a === void 0 ? void 0 : _a.increment) && ((_b = state.animation) === null || _b === void 0 ? void 0 : _b.duration)) {\n            cleanupAnimationIncrement(() => dispatch({ type: \"swipe\", increment: 0 }), state.animation.duration);\n        }\n    }, [state.animation, dispatch, cleanupAnimationIncrement]);\n    const swipeParams = [\n        subscribeSensors,\n        isSwipeValid,\n        (containerRect === null || containerRect === void 0 ? void 0 : containerRect.width) || 0,\n        animation.swipe,\n        () => setSwipeState(SwipeState.SWIPE),\n        (offset) => setSwipeOffset(offset),\n        (offset, duration) => swipe({ offset, duration, count: 1 }),\n        (offset) => swipe({ offset, count: 0 }),\n    ];\n    const pullDownParams = [\n        () => {\n            if (closeOnPullDown) {\n                setSwipeState(SwipeState.PULL_DOWN);\n            }\n        },\n        (offset) => setPullDownOffset(offset),\n        (offset) => pullDown(offset),\n        (offset) => pullDown(offset, true),\n    ];\n    usePointerSwipe(...swipeParams, closeOnPullDown, ...pullDownParams);\n    useWheelSwipe(swipeState, ...swipeParams);\n    const focusOnMount = useEventCallback(() => {\n        var _a;\n        if (controller.focus) {\n            (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n    });\n    React.useEffect(focusOnMount, [focusOnMount]);\n    const onViewCallback = useEventCallback(() => {\n        var _a;\n        (_a = on.view) === null || _a === void 0 ? void 0 : _a.call(on, { index: state.currentIndex });\n    });\n    React.useEffect(onViewCallback, [state.globalIndex, onViewCallback]);\n    React.useEffect(() => cleanup(subscribe(ACTION_PREV, (action) => swipe({ direction: ACTION_PREV, ...action })), subscribe(ACTION_NEXT, (action) => swipe({ direction: ACTION_NEXT, ...action })), subscribe(ACTION_SWIPE, (action) => dispatch(action))), [subscribe, swipe, dispatch]);\n    const context = React.useMemo(() => ({\n        prev,\n        next,\n        close,\n        focus,\n        slideRect: containerRect ? computeSlideRect(containerRect, carousel.padding) : { width: 0, height: 0 },\n        containerRect: containerRect || { width: 0, height: 0 },\n        subscribeSensors,\n        containerRef,\n        setCarouselRef,\n        toolbarWidth,\n        setToolbarWidth,\n    }), [\n        prev,\n        next,\n        close,\n        focus,\n        subscribeSensors,\n        containerRect,\n        containerRef,\n        setCarouselRef,\n        toolbarWidth,\n        setToolbarWidth,\n        carousel.padding,\n    ]);\n    React.useImperativeHandle(controller.ref, () => ({\n        prev,\n        next,\n        close,\n        focus,\n        getLightboxProps,\n        getLightboxState,\n    }), [prev, next, close, focus, getLightboxProps, getLightboxState]);\n    return (React.createElement(\"div\", { ref: handleContainerRef, className: clsx(cssClass(cssContainerPrefix()), cssClass(CLASS_FLEX_CENTER)), style: {\n            ...(swipeState === SwipeState.SWIPE\n                ? { [cssVar(\"swipe_offset\")]: `${Math.round(swipeOffset.current)}px` }\n                : null),\n            ...(swipeState === SwipeState.PULL_DOWN\n                ? {\n                    [cssVar(\"pull_down_offset\")]: `${Math.round(pullDownOffset.current)}px`,\n                    [cssVar(\"pull_down_opacity\")]: `${pullDownOpacity.current}`,\n                }\n                : null),\n            ...(controller.touchAction !== \"none\"\n                ? { [cssVar(\"controller_touch_action\")]: controller.touchAction }\n                : null),\n            ...styles.container,\n        }, ...(controller.aria ? { role: \"presentation\", \"aria-live\": \"polite\" } : null), tabIndex: -1, ...registerSensors }, containerRect && (React.createElement(ControllerContext.Provider, { value: context },\n        children, (_a = render.controls) === null || _a === void 0 ? void 0 :\n        _a.call(render)))));\n}\nconst ControllerModule = createModule(MODULE_CONTROLLER, Controller);\n\nfunction cssPrefix$2(value) {\n    return composePrefix(MODULE_CAROUSEL, value);\n}\nfunction cssSlidePrefix(value) {\n    return composePrefix(\"slide\", value);\n}\nfunction CarouselSlide({ slide, offset }) {\n    const containerRef = React.useRef(null);\n    const { currentIndex } = useLightboxState();\n    const { slideRect, close } = useController();\n    const { render, carousel: { imageFit, imageProps }, on: { click: onClick }, controller: { closeOnBackdropClick }, styles: { slide: style }, } = useLightboxProps();\n    const renderSlide = () => {\n        var _a, _b, _c, _d;\n        let rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, { slide, offset, rect: slideRect });\n        if (!rendered && isImageSlide(slide)) {\n            rendered = (React.createElement(ImageSlide, { slide: slide, offset: offset, render: render, rect: slideRect, imageFit: imageFit, imageProps: imageProps, onClick: offset === 0 ? () => onClick === null || onClick === void 0 ? void 0 : onClick({ index: currentIndex }) : undefined }));\n        }\n        return rendered ? (React.createElement(React.Fragment, null, (_b = render.slideHeader) === null || _b === void 0 ? void 0 :\n            _b.call(render, { slide }),\n            ((_c = render.slideContainer) !== null && _c !== void 0 ? _c : (({ children }) => children))({ slide, children: rendered }), (_d = render.slideFooter) === null || _d === void 0 ? void 0 :\n            _d.call(render, { slide }))) : null;\n    };\n    const handleBackdropClick = (event) => {\n        const container = containerRef.current;\n        const target = event.target instanceof HTMLElement ? event.target : undefined;\n        if (closeOnBackdropClick &&\n            target &&\n            container &&\n            (target === container ||\n                (Array.from(container.children).find((x) => x === target) &&\n                    target.classList.contains(cssClass(CLASS_FULLSIZE))))) {\n            close();\n        }\n    };\n    return (React.createElement(\"div\", { ref: containerRef, className: clsx(cssClass(cssSlidePrefix()), offset === 0 && cssClass(cssSlidePrefix(\"current\")), cssClass(CLASS_FLEX_CENTER)), onClick: handleBackdropClick, style: style }, renderSlide()));\n}\nfunction Placeholder() {\n    const style = useLightboxProps().styles.slide;\n    return React.createElement(\"div\", { className: cssClass(\"slide\"), style: style });\n}\nfunction Carousel({ carousel }) {\n    const { slides, currentIndex, globalIndex } = useLightboxState();\n    const { setCarouselRef } = useController();\n    const spacingValue = parseLengthPercentage(carousel.spacing);\n    const paddingValue = parseLengthPercentage(carousel.padding);\n    const items = [];\n    const preload = calculatePreload(carousel, slides, 1);\n    if (hasSlides(slides)) {\n        for (let i = currentIndex - preload; i < currentIndex; i += 1) {\n            const key = globalIndex + i - currentIndex;\n            items.push(!carousel.finite || i >= 0 ? (React.createElement(CarouselSlide, { key: key, slide: slides[(i + preload * slides.length) % slides.length], offset: i - currentIndex })) : (React.createElement(Placeholder, { key: key })));\n        }\n        items.push(React.createElement(CarouselSlide, { key: globalIndex, slide: slides[currentIndex], offset: 0 }));\n        for (let i = currentIndex + 1; i <= currentIndex + preload; i += 1) {\n            const key = globalIndex + i - currentIndex;\n            items.push(!carousel.finite || i <= slides.length - 1 ? (React.createElement(CarouselSlide, { key: key, slide: slides[i % slides.length], offset: i - currentIndex })) : (React.createElement(Placeholder, { key: key })));\n        }\n    }\n    return (React.createElement(\"div\", { ref: setCarouselRef, className: clsx(cssClass(cssPrefix$2()), items.length > 0 && cssClass(cssPrefix$2(\"with_slides\"))), style: {\n            [`${cssVar(cssPrefix$2(\"slides_count\"))}`]: items.length,\n            [`${cssVar(cssPrefix$2(\"spacing_px\"))}`]: spacingValue.pixel || 0,\n            [`${cssVar(cssPrefix$2(\"spacing_percent\"))}`]: spacingValue.percent || 0,\n            [`${cssVar(cssPrefix$2(\"padding_px\"))}`]: paddingValue.pixel || 0,\n            [`${cssVar(cssPrefix$2(\"padding_percent\"))}`]: paddingValue.percent || 0,\n        } }, items));\n}\nconst CarouselModule = createModule(MODULE_CAROUSEL, Carousel);\n\nfunction useNavigationState() {\n    const { carousel } = useLightboxProps();\n    const { slides, currentIndex } = useLightboxState();\n    const prevDisabled = slides.length === 0 || (carousel.finite && currentIndex === 0);\n    const nextDisabled = slides.length === 0 || (carousel.finite && currentIndex === slides.length - 1);\n    return { prevDisabled, nextDisabled };\n}\n\nfunction useKeyboardNavigation(subscribeSensors) {\n    var _a;\n    const isRTL = useRTL();\n    const { publish } = useEvents();\n    const { animation } = useLightboxProps();\n    const { prevDisabled, nextDisabled } = useNavigationState();\n    const throttle = ((_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe) / 2;\n    const prev = useThrottle(() => publish(ACTION_PREV), throttle);\n    const next = useThrottle(() => publish(ACTION_NEXT), throttle);\n    const handleKeyDown = useEventCallback((event) => {\n        switch (event.key) {\n            case VK_ESCAPE:\n                publish(ACTION_CLOSE);\n                break;\n            case VK_ARROW_LEFT:\n                if (!(isRTL ? nextDisabled : prevDisabled))\n                    (isRTL ? next : prev)();\n                break;\n            case VK_ARROW_RIGHT:\n                if (!(isRTL ? prevDisabled : nextDisabled))\n                    (isRTL ? prev : next)();\n                break;\n            default:\n        }\n    });\n    React.useEffect(() => subscribeSensors(EVENT_ON_KEY_DOWN, handleKeyDown), [subscribeSensors, handleKeyDown]);\n}\n\nfunction NavigationButton({ label, icon, renderIcon, action, onClick, disabled, style }) {\n    return (React.createElement(IconButton, { label: label, icon: icon, renderIcon: renderIcon, className: cssClass(`navigation_${action}`), disabled: disabled, onClick: onClick, style: style, ...useLoseFocus(useController().focus, disabled) }));\n}\nfunction Navigation({ render: { buttonPrev, buttonNext, iconPrev, iconNext }, styles }) {\n    const { prev, next, subscribeSensors } = useController();\n    const { prevDisabled, nextDisabled } = useNavigationState();\n    useKeyboardNavigation(subscribeSensors);\n    return (React.createElement(React.Fragment, null,\n        buttonPrev ? (buttonPrev()) : (React.createElement(NavigationButton, { label: \"Previous\", action: ACTION_PREV, icon: PreviousIcon, renderIcon: iconPrev, style: styles.navigationPrev, disabled: prevDisabled, onClick: prev })),\n        buttonNext ? (buttonNext()) : (React.createElement(NavigationButton, { label: \"Next\", action: ACTION_NEXT, icon: NextIcon, renderIcon: iconNext, style: styles.navigationNext, disabled: nextDisabled, onClick: next }))));\n}\nconst NavigationModule = createModule(MODULE_NAVIGATION, Navigation);\n\nconst noScroll = cssClass(CLASS_NO_SCROLL);\nconst noScrollPadding = cssClass(CLASS_NO_SCROLL_PADDING);\nfunction isHTMLElement(element) {\n    return \"style\" in element;\n}\nfunction padScrollbar(element, padding, rtl) {\n    const styles = window.getComputedStyle(element);\n    const property = rtl ? \"padding-left\" : \"padding-right\";\n    const computedValue = rtl ? styles.paddingLeft : styles.paddingRight;\n    const originalValue = element.style.getPropertyValue(property);\n    element.style.setProperty(property, `${(parseInt(computedValue, 10) || 0) + padding}px`);\n    return () => {\n        if (originalValue) {\n            element.style.setProperty(property, originalValue);\n        }\n        else {\n            element.style.removeProperty(property);\n        }\n    };\n}\nfunction NoScroll({ noScroll: { disabled }, children }) {\n    const rtl = useRTL();\n    useLayoutEffect(() => {\n        if (disabled)\n            return () => { };\n        const cleanup = [];\n        const { body, documentElement } = document;\n        const scrollbar = Math.round(window.innerWidth - documentElement.clientWidth);\n        if (scrollbar > 0) {\n            cleanup.push(padScrollbar(body, scrollbar, rtl));\n            const elements = body.getElementsByTagName(\"*\");\n            for (let i = 0; i < elements.length; i += 1) {\n                const element = elements[i];\n                if (isHTMLElement(element) &&\n                    window.getComputedStyle(element).getPropertyValue(\"position\") === \"fixed\" &&\n                    !element.classList.contains(noScrollPadding)) {\n                    cleanup.push(padScrollbar(element, scrollbar, rtl));\n                }\n            }\n        }\n        body.classList.add(noScroll);\n        return () => {\n            body.classList.remove(noScroll);\n            cleanup.forEach((clean) => clean());\n        };\n    }, [rtl, disabled]);\n    return React.createElement(React.Fragment, null, children);\n}\nconst NoScrollModule = createModule(MODULE_NO_SCROLL, NoScroll);\n\nfunction cssPrefix$1(value) {\n    return composePrefix(MODULE_PORTAL, value);\n}\nfunction setAttribute(element, attribute, value) {\n    const previousValue = element.getAttribute(attribute);\n    element.setAttribute(attribute, value);\n    return () => {\n        if (previousValue) {\n            element.setAttribute(attribute, previousValue);\n        }\n        else {\n            element.removeAttribute(attribute);\n        }\n    };\n}\nfunction Portal({ children, animation, styles, className, on, portal, close }) {\n    const [mounted, setMounted] = React.useState(false);\n    const [visible, setVisible] = React.useState(false);\n    const cleanup = React.useRef([]);\n    const { setTimeout } = useTimeouts();\n    const { subscribe } = useEvents();\n    const reduceMotion = useMotionPreference();\n    const animationDuration = !reduceMotion ? animation.fade : 0;\n    React.useEffect(() => {\n        setMounted(true);\n        return () => {\n            setMounted(false);\n            setVisible(false);\n        };\n    }, []);\n    const handleClose = useEventCallback(() => {\n        var _a;\n        setVisible(false);\n        (_a = on.exiting) === null || _a === void 0 ? void 0 : _a.call(on);\n        setTimeout(() => {\n            var _a;\n            (_a = on.exited) === null || _a === void 0 ? void 0 : _a.call(on);\n            close();\n        }, animationDuration);\n    });\n    React.useEffect(() => subscribe(ACTION_CLOSE, handleClose), [subscribe, handleClose]);\n    const handleEnter = useEventCallback((node) => {\n        var _a, _b, _c;\n        node.scrollTop;\n        setVisible(true);\n        (_a = on.entering) === null || _a === void 0 ? void 0 : _a.call(on);\n        const elements = (_c = (_b = node.parentNode) === null || _b === void 0 ? void 0 : _b.children) !== null && _c !== void 0 ? _c : [];\n        for (let i = 0; i < elements.length; i += 1) {\n            const element = elements[i];\n            if ([\"TEMPLATE\", \"SCRIPT\", \"STYLE\"].indexOf(element.tagName) === -1 && element !== node) {\n                cleanup.current.push(setAttribute(element, \"inert\", \"true\"));\n                cleanup.current.push(setAttribute(element, \"aria-hidden\", \"true\"));\n            }\n        }\n        setTimeout(() => {\n            var _a;\n            (_a = on.entered) === null || _a === void 0 ? void 0 : _a.call(on);\n        }, animationDuration);\n    });\n    const handleExit = useEventCallback(() => {\n        cleanup.current.forEach((clean) => clean());\n        cleanup.current = [];\n    });\n    const handleRef = React.useCallback((node) => {\n        if (node) {\n            handleEnter(node);\n        }\n        else {\n            handleExit();\n        }\n    }, [handleEnter, handleExit]);\n    return mounted\n        ? createPortal(React.createElement(\"div\", { ref: handleRef, className: clsx(className, cssClass(\"root\"), cssClass(cssPrefix$1()), cssClass(CLASS_NO_SCROLL_PADDING), visible && cssClass(cssPrefix$1(\"open\"))), role: \"presentation\", \"aria-live\": \"polite\", style: {\n                ...(animation.fade !== LightboxDefaultProps.animation.fade\n                    ? { [cssVar(\"fade_animation_duration\")]: `${animationDuration}ms` }\n                    : null),\n                ...(animation.easing.fade !== LightboxDefaultProps.animation.easing.fade\n                    ? { [cssVar(\"fade_animation_timing_function\")]: animation.easing.fade }\n                    : null),\n                ...styles.root,\n            } }, children), portal.root || document.body)\n        : null;\n}\nconst PortalModule = createModule(MODULE_PORTAL, Portal);\n\nfunction Root({ children }) {\n    return React.createElement(React.Fragment, null, children);\n}\nconst RootModule = createModule(MODULE_ROOT, Root);\n\nfunction cssPrefix(value) {\n    return composePrefix(MODULE_TOOLBAR, value);\n}\nfunction Toolbar({ toolbar: { buttons }, render: { buttonClose, iconClose }, styles }) {\n    const { close, setToolbarWidth } = useController();\n    const { setContainerRef, containerRect } = useContainerRect();\n    useLayoutEffect(() => {\n        setToolbarWidth(containerRect === null || containerRect === void 0 ? void 0 : containerRect.width);\n    }, [setToolbarWidth, containerRect === null || containerRect === void 0 ? void 0 : containerRect.width]);\n    const renderCloseButton = () => {\n        if (buttonClose)\n            return buttonClose();\n        return React.createElement(IconButton, { key: ACTION_CLOSE, label: \"Close\", icon: CloseIcon, renderIcon: iconClose, onClick: close });\n    };\n    return (React.createElement(\"div\", { ref: setContainerRef, style: styles.toolbar, className: cssClass(cssPrefix()), ...stopNavigationEventsPropagation() }, buttons === null || buttons === void 0 ? void 0 : buttons.map((button) => (button === ACTION_CLOSE ? renderCloseButton() : button))));\n}\nconst ToolbarModule = createModule(MODULE_TOOLBAR, Toolbar);\n\nfunction renderNode(node, props) {\n    var _a;\n    return React.createElement(node.module.component, { key: node.module.name, ...props }, (_a = node.children) === null || _a === void 0 ? void 0 : _a.map((child) => renderNode(child, props)));\n}\nfunction mergeAnimation(defaultAnimation, animation = {}) {\n    const { easing: defaultAnimationEasing, ...restDefaultAnimation } = defaultAnimation;\n    const { easing, ...restAnimation } = animation;\n    return {\n        easing: { ...defaultAnimationEasing, ...easing },\n        ...restDefaultAnimation,\n        ...restAnimation,\n    };\n}\nfunction Lightbox({ carousel, animation, render, toolbar, controller, noScroll, on, plugins, slides, index, ...restProps }) {\n    const { animation: defaultAnimation, carousel: defaultCarousel, render: defaultRender, toolbar: defaultToolbar, controller: defaultController, noScroll: defaultNoScroll, on: defaultOn, slides: defaultSlides, index: defaultIndex, plugins: defaultPlugins, ...restDefaultProps } = LightboxDefaultProps;\n    const { config, augmentation } = withPlugins([\n        createNode(PortalModule, [\n            createNode(NoScrollModule, [\n                createNode(ControllerModule, [\n                    createNode(CarouselModule),\n                    createNode(ToolbarModule),\n                    createNode(NavigationModule),\n                ]),\n            ]),\n        ]),\n    ], plugins || defaultPlugins);\n    const props = augmentation({\n        animation: mergeAnimation(defaultAnimation, animation),\n        carousel: { ...defaultCarousel, ...carousel },\n        render: { ...defaultRender, ...render },\n        toolbar: { ...defaultToolbar, ...toolbar },\n        controller: { ...defaultController, ...controller },\n        noScroll: { ...defaultNoScroll, ...noScroll },\n        on: { ...defaultOn, ...on },\n        ...restDefaultProps,\n        ...restProps,\n    });\n    if (!props.open)\n        return null;\n    return (React.createElement(LightboxPropsProvider, { ...props },\n        React.createElement(LightboxStateProvider, { slides: slides || defaultSlides, index: index || defaultIndex },\n            React.createElement(TimeoutsProvider, null,\n                React.createElement(EventsProvider, null, renderNode(createNode(RootModule, config), props))))));\n}\n\nexport { ACTION_CLOSE, ACTION_NEXT, ACTION_PREV, ACTION_SWIPE, CLASS_FLEX_CENTER, CLASS_FULLSIZE, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, Carousel, CarouselModule, CloseIcon, Controller, ControllerContext, ControllerModule, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_POINTER_CANCEL, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_WHEEL, ErrorIcon, EventsContext, EventsProvider, IMAGE_FIT_CONTAIN, IMAGE_FIT_COVER, IconButton, ImageSlide, Lightbox, LightboxDefaultProps, LightboxDispatchContext, LightboxPropsContext, LightboxPropsProvider, LightboxStateContext, LightboxStateProvider, LoadingIcon, MODULE_CAROUSEL, MODULE_CONTROLLER, MODULE_NAVIGATION, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR, Navigation, NavigationButton, NavigationModule, NextIcon, NoScroll, NoScrollModule, Portal, PortalModule, PreviousIcon, Root, RootModule, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_LOADING, SLIDE_STATUS_PLACEHOLDER, SwipeState, TimeoutsContext, TimeoutsProvider, Toolbar, ToolbarModule, UNKNOWN_ACTION_TYPE, VK_ARROW_LEFT, VK_ARROW_RIGHT, VK_ESCAPE, activeSlideStatus, addToolbarButton, calculatePreload, cleanup, clsx, composePrefix, computeSlideRect, createIcon, createIconDisabled, createModule, createNode, cssClass, cssVar, Lightbox as default, devicePixelRatio, getSlide, getSlideIfPresent, getSlideIndex, hasSlides, hasWindow, isImageFitCover, isImageSlide, label, makeComposePrefix, makeUseContext, parseLengthPercentage, round, setRef, stopNavigationEventsPropagation, useAnimation, useContainerRect, useController, useDelay, useEventCallback, useEvents, useForkRef, useKeyboardNavigation, useLayoutEffect, useLightboxDispatch, useLightboxProps, useLightboxState, useLoseFocus, useMotionPreference, useNavigationState, usePointerEvents, usePointerSwipe, usePreventSwipeNavigation, useRTL, useSensors, useThrottle, useTimeouts, useWheelSwipe, withPlugins };","import { useLightboxProps, useMotionPreference, useEventCallback, useLayoutEffect, useLightboxState, isImageSlide, isImageFitCover, round, useController, usePointerEvents, cleanup, makeUseContext, createIcon, IconButton, devicePixelRatio, ImageSlide, cssClass, clsx, addToolbarButton, createModule } from '../../index.js';\nimport * as React from 'react';\nimport { EVENT_ON_KEY_DOWN, EVENT_ON_WHEEL, UNKNOWN_ACTION_TYPE, CLASS_FULLSIZE, CLASS_FLEX_CENTER, PLUGIN_ZOOM } from '../../types.js';\n\nconst defaultZoomProps = {\n    maxZoomPixelRatio: 1,\n    zoomInMultiplier: 2,\n    doubleTapDelay: 300,\n    doubleClickDelay: 500,\n    doubleClickMaxStops: 2,\n    keyboardMoveDistance: 50,\n    wheelZoomDistanceFactor: 100,\n    pinchZoomDistanceFactor: 100,\n    scrollToZoom: false,\n};\nconst resolveZoomProps = (zoom) => ({\n    ...defaultZoomProps,\n    ...zoom,\n});\n\nfunction useZoomAnimation(zoom, offsetX, offsetY, zoomWrapperRef) {\n    const zoomAnimation = React.useRef();\n    const zoomAnimationStart = React.useRef();\n    const { zoom: zoomAnimationDuration } = useLightboxProps().animation;\n    const reduceMotion = useMotionPreference();\n    const playZoomAnimation = useEventCallback(() => {\n        var _a, _b, _c;\n        (_a = zoomAnimation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        zoomAnimation.current = undefined;\n        if (zoomAnimationStart.current && (zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current)) {\n            try {\n                zoomAnimation.current = (_c = (_b = zoomWrapperRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, [\n                    { transform: zoomAnimationStart.current },\n                    { transform: `scale(${zoom}) translateX(${offsetX}px) translateY(${offsetY}px)` },\n                ], {\n                    duration: !reduceMotion ? zoomAnimationDuration !== null && zoomAnimationDuration !== void 0 ? zoomAnimationDuration : 500 : 0,\n                    easing: zoomAnimation.current ? \"ease-out\" : \"ease-in-out\",\n                });\n            }\n            catch (err) {\n                console.error(err);\n            }\n            zoomAnimationStart.current = undefined;\n            if (zoomAnimation.current) {\n                zoomAnimation.current.onfinish = () => {\n                    zoomAnimation.current = undefined;\n                };\n            }\n        }\n    });\n    useLayoutEffect(playZoomAnimation, [zoom, offsetX, offsetY, playZoomAnimation]);\n    return React.useCallback(() => {\n        zoomAnimationStart.current = (zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current)\n            ? window.getComputedStyle(zoomWrapperRef.current).transform\n            : undefined;\n    }, [zoomWrapperRef]);\n}\n\nfunction useZoomCallback(zoom, disabled) {\n    const { on } = useLightboxProps();\n    const onZoomCallback = useEventCallback(() => {\n        var _a;\n        if (!disabled) {\n            (_a = on.zoom) === null || _a === void 0 ? void 0 : _a.call(on, { zoom });\n        }\n    });\n    React.useEffect(onZoomCallback, [zoom, onZoomCallback]);\n}\n\nfunction useZoomProps() {\n    const { zoom } = useLightboxProps();\n    return resolveZoomProps(zoom);\n}\n\nfunction useZoomImageRect(slideRect, imageDimensions) {\n    var _a, _b;\n    let imageRect = { width: 0, height: 0 };\n    let maxImageRect = { width: 0, height: 0 };\n    const { slides, currentIndex } = useLightboxState();\n    const { imageFit } = useLightboxProps().carousel;\n    const { maxZoomPixelRatio } = useZoomProps();\n    if (slideRect && currentIndex < slides.length) {\n        const slide = { ...slides[currentIndex], ...imageDimensions };\n        if (isImageSlide(slide)) {\n            const cover = isImageFitCover(slide, imageFit);\n            const width = Math.max(...(((_a = slide.srcSet) === null || _a === void 0 ? void 0 : _a.map((x) => x.width)) || []).concat(slide.width ? [slide.width] : []));\n            const height = Math.max(...(((_b = slide.srcSet) === null || _b === void 0 ? void 0 : _b.map((x) => x.height)) || []).concat(slide.height ? [slide.height] : []));\n            if (width > 0 && height > 0 && slideRect.width > 0 && slideRect.height > 0) {\n                maxImageRect = cover\n                    ? {\n                        width: Math.round(Math.min(width, (slideRect.width / slideRect.height) * height)),\n                        height: Math.round(Math.min(height, (slideRect.height / slideRect.width) * width)),\n                    }\n                    : { width, height };\n                maxImageRect = {\n                    width: maxImageRect.width * maxZoomPixelRatio,\n                    height: maxImageRect.height * maxZoomPixelRatio,\n                };\n                imageRect = cover\n                    ? {\n                        width: Math.min(slideRect.width, maxImageRect.width, width),\n                        height: Math.min(slideRect.height, maxImageRect.height, height),\n                    }\n                    : {\n                        width: Math.round(Math.min(slideRect.width, (slideRect.height / height) * width, width)),\n                        height: Math.round(Math.min(slideRect.height, (slideRect.width / width) * height, height)),\n                    };\n            }\n        }\n    }\n    const maxZoom = imageRect.width ? Math.max(round(maxImageRect.width / imageRect.width, 5), 1) : 1;\n    return { imageRect, maxZoom };\n}\n\nfunction distance(pointerA, pointerB) {\n    return ((pointerA.clientX - pointerB.clientX) ** 2 + (pointerA.clientY - pointerB.clientY) ** 2) ** 0.5;\n}\nfunction useZoomSensors(zoom, maxZoom, disabled, changeZoom, changeOffsets, zoomWrapperRef) {\n    const activePointers = React.useRef([]);\n    const lastPointerDown = React.useRef(0);\n    const pinchZoomDistance = React.useRef();\n    const { globalIndex } = useLightboxState();\n    const { containerRef, subscribeSensors } = useController();\n    const { keyboardMoveDistance, zoomInMultiplier, wheelZoomDistanceFactor, scrollToZoom, doubleTapDelay, doubleClickDelay, doubleClickMaxStops, pinchZoomDistanceFactor, } = useZoomProps();\n    const translateCoordinates = React.useCallback((event) => {\n        if (containerRef.current) {\n            const { pageX, pageY } = event;\n            const { scrollX, scrollY } = window;\n            const { left, top, width, height } = containerRef.current.getBoundingClientRect();\n            return [pageX - left - scrollX - width / 2, pageY - top - scrollY - height / 2];\n        }\n        return [];\n    }, [containerRef]);\n    const onKeyDown = useEventCallback((event) => {\n        const preventDefault = () => {\n            event.preventDefault();\n            event.stopPropagation();\n        };\n        if (zoom > 1) {\n            const move = (deltaX, deltaY) => {\n                preventDefault();\n                changeOffsets(deltaX, deltaY);\n            };\n            if (event.key === \"ArrowDown\") {\n                move(0, keyboardMoveDistance);\n            }\n            else if (event.key === \"ArrowUp\") {\n                move(0, -keyboardMoveDistance);\n            }\n            else if (event.key === \"ArrowLeft\") {\n                move(-keyboardMoveDistance, 0);\n            }\n            else if (event.key === \"ArrowRight\") {\n                move(keyboardMoveDistance, 0);\n            }\n        }\n        const handleChangeZoom = (zoomValue) => {\n            preventDefault();\n            changeZoom(zoomValue);\n        };\n        const hasMeta = () => event.getModifierState(\"Meta\");\n        if (event.key === \"+\" || (event.key === \"=\" && hasMeta())) {\n            handleChangeZoom(zoom * zoomInMultiplier);\n        }\n        else if (event.key === \"-\" || (event.key === \"_\" && hasMeta())) {\n            handleChangeZoom(zoom / zoomInMultiplier);\n        }\n        else if (event.key === \"0\" && hasMeta()) {\n            handleChangeZoom(1);\n        }\n    });\n    const onWheel = useEventCallback((event) => {\n        if (event.ctrlKey || scrollToZoom) {\n            if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n                event.stopPropagation();\n                changeZoom(zoom * (1 - event.deltaY / wheelZoomDistanceFactor), true, ...translateCoordinates(event));\n                return;\n            }\n        }\n        if (zoom > 1) {\n            event.stopPropagation();\n            if (!scrollToZoom) {\n                changeOffsets(event.deltaX, event.deltaY);\n            }\n        }\n    });\n    const clearPointer = React.useCallback((event) => {\n        const pointers = activePointers.current;\n        pointers.splice(0, pointers.length, ...pointers.filter((p) => p.pointerId !== event.pointerId));\n    }, []);\n    const replacePointer = React.useCallback((event) => {\n        clearPointer(event);\n        event.persist();\n        activePointers.current.push(event);\n    }, [clearPointer]);\n    const onPointerDown = useEventCallback((event) => {\n        var _a;\n        const pointers = activePointers.current;\n        if (!((_a = zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current) === null || _a === void 0 ? void 0 : _a.contains(event.target))) {\n            return;\n        }\n        if (zoom > 1) {\n            event.stopPropagation();\n        }\n        const { timeStamp } = event;\n        if (pointers.length === 0 &&\n            timeStamp - lastPointerDown.current < (event.pointerType === \"touch\" ? doubleTapDelay : doubleClickDelay)) {\n            lastPointerDown.current = 0;\n            changeZoom(zoom !== maxZoom ? zoom * Math.max(maxZoom ** (1 / doubleClickMaxStops), zoomInMultiplier) : 1, false, ...translateCoordinates(event));\n        }\n        else {\n            lastPointerDown.current = timeStamp;\n        }\n        replacePointer(event);\n        if (pointers.length === 2) {\n            pinchZoomDistance.current = distance(pointers[0], pointers[1]);\n        }\n    });\n    const onPointerMove = useEventCallback((event) => {\n        const pointers = activePointers.current;\n        const activePointer = pointers.find((p) => p.pointerId === event.pointerId);\n        if (pointers.length === 2 && pinchZoomDistance.current) {\n            event.stopPropagation();\n            replacePointer(event);\n            const currentDistance = distance(pointers[0], pointers[1]);\n            const delta = currentDistance - pinchZoomDistance.current;\n            if (Math.abs(delta) > 0) {\n                changeZoom(zoom * (1 + delta / pinchZoomDistanceFactor), true, ...pointers\n                    .map((x) => translateCoordinates(x))\n                    .reduce((acc, coordinate) => coordinate.map((x, i) => acc[i] + x / 2)));\n                pinchZoomDistance.current = currentDistance;\n            }\n            return;\n        }\n        if (zoom > 1) {\n            event.stopPropagation();\n            if (activePointer) {\n                if (pointers.length === 1) {\n                    changeOffsets((activePointer.clientX - event.clientX) / zoom, (activePointer.clientY - event.clientY) / zoom);\n                }\n                replacePointer(event);\n            }\n        }\n    });\n    const onPointerUp = React.useCallback((event) => {\n        const pointers = activePointers.current;\n        if (pointers.length === 2 && pointers.find((p) => p.pointerId === event.pointerId)) {\n            pinchZoomDistance.current = undefined;\n        }\n        clearPointer(event);\n    }, [clearPointer]);\n    const cleanupSensors = React.useCallback(() => {\n        const pointers = activePointers.current;\n        pointers.splice(0, pointers.length);\n        lastPointerDown.current = 0;\n        pinchZoomDistance.current = undefined;\n    }, []);\n    usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled);\n    React.useEffect(cleanupSensors, [globalIndex, cleanupSensors]);\n    React.useEffect(() => {\n        if (!disabled) {\n            return cleanup(cleanupSensors, subscribeSensors(EVENT_ON_KEY_DOWN, onKeyDown), subscribeSensors(EVENT_ON_WHEEL, onWheel));\n        }\n        return () => { };\n    }, [disabled, subscribeSensors, cleanupSensors, onKeyDown, onWheel]);\n}\n\nfunction getCurrentSource(slides, currentIndex) {\n    if (currentIndex < slides.length) {\n        const slide = slides[currentIndex];\n        if (isImageSlide(slide))\n            return slide.src;\n    }\n    return undefined;\n}\nfunction useZoomState(imageRect, maxZoom, zoomWrapperRef) {\n    const [zoom, setZoom] = React.useState(1);\n    const [offsetX, setOffsetX] = React.useState(0);\n    const [offsetY, setOffsetY] = React.useState(0);\n    const animate = useZoomAnimation(zoom, offsetX, offsetY, zoomWrapperRef);\n    const { slides, currentIndex, globalIndex } = useLightboxState();\n    const { containerRect, slideRect } = useController();\n    const { zoomInMultiplier } = useZoomProps();\n    const currentSource = getCurrentSource(slides, currentIndex);\n    const disabled = !currentSource || !(zoomWrapperRef === null || zoomWrapperRef === void 0 ? void 0 : zoomWrapperRef.current);\n    useLayoutEffect(() => {\n        setZoom(1);\n        setOffsetX(0);\n        setOffsetY(0);\n    }, [globalIndex, currentSource]);\n    const changeOffsets = React.useCallback((dx, dy, targetZoom) => {\n        const newZoom = targetZoom || zoom;\n        const newOffsetX = offsetX - (dx || 0);\n        const newOffsetY = offsetY - (dy || 0);\n        const maxOffsetX = (imageRect.width * newZoom - slideRect.width) / 2 / newZoom;\n        const maxOffsetY = (imageRect.height * newZoom - slideRect.height) / 2 / newZoom;\n        setOffsetX(Math.min(Math.abs(newOffsetX), Math.max(maxOffsetX, 0)) * Math.sign(newOffsetX));\n        setOffsetY(Math.min(Math.abs(newOffsetY), Math.max(maxOffsetY, 0)) * Math.sign(newOffsetY));\n    }, [zoom, offsetX, offsetY, slideRect, imageRect.width, imageRect.height]);\n    const changeZoom = React.useCallback((targetZoom, rapid, dx, dy) => {\n        const newZoom = round(Math.min(Math.max(targetZoom + 0.001 < maxZoom ? targetZoom : maxZoom, 1), maxZoom), 5);\n        if (newZoom === zoom)\n            return;\n        if (!rapid) {\n            animate();\n        }\n        changeOffsets(dx ? dx * (1 / zoom - 1 / newZoom) : 0, dy ? dy * (1 / zoom - 1 / newZoom) : 0, newZoom);\n        setZoom(newZoom);\n    }, [zoom, maxZoom, changeOffsets, animate]);\n    const handleControllerRectChange = useEventCallback(() => {\n        if (zoom > 1) {\n            if (zoom > maxZoom) {\n                changeZoom(maxZoom, true);\n            }\n            changeOffsets();\n        }\n    });\n    useLayoutEffect(handleControllerRectChange, [\n        containerRect.width,\n        containerRect.height,\n        handleControllerRectChange,\n    ]);\n    const zoomIn = React.useCallback(() => changeZoom(zoom * zoomInMultiplier), [zoom, zoomInMultiplier, changeZoom]);\n    const zoomOut = React.useCallback(() => changeZoom(zoom / zoomInMultiplier), [zoom, zoomInMultiplier, changeZoom]);\n    return { zoom, offsetX, offsetY, disabled, changeOffsets, changeZoom, zoomIn, zoomOut };\n}\n\nconst ZoomControllerContext = React.createContext(null);\nconst useZoom = makeUseContext(\"useZoom\", \"ZoomControllerContext\", ZoomControllerContext);\nfunction ZoomContextProvider({ children }) {\n    const [zoomWrapper, setZoomWrapper] = React.useState();\n    const { slideRect } = useController();\n    const { imageRect, maxZoom } = useZoomImageRect(slideRect, zoomWrapper === null || zoomWrapper === void 0 ? void 0 : zoomWrapper.imageDimensions);\n    const { zoom, offsetX, offsetY, disabled, changeZoom, changeOffsets, zoomIn, zoomOut } = useZoomState(imageRect, maxZoom, zoomWrapper === null || zoomWrapper === void 0 ? void 0 : zoomWrapper.zoomWrapperRef);\n    useZoomCallback(zoom, disabled);\n    useZoomSensors(zoom, maxZoom, disabled, changeZoom, changeOffsets, zoomWrapper === null || zoomWrapper === void 0 ? void 0 : zoomWrapper.zoomWrapperRef);\n    const zoomRef = React.useMemo(() => ({ zoom, maxZoom, offsetX, offsetY, disabled, zoomIn, zoomOut, changeZoom }), [zoom, maxZoom, offsetX, offsetY, disabled, zoomIn, zoomOut, changeZoom]);\n    React.useImperativeHandle(useZoomProps().ref, () => zoomRef, [zoomRef]);\n    const context = React.useMemo(() => ({ ...zoomRef, setZoomWrapper }), [zoomRef, setZoomWrapper]);\n    return React.createElement(ZoomControllerContext.Provider, { value: context }, children);\n}\n\nconst ZoomInIcon = createIcon(\"ZoomIn\", React.createElement(React.Fragment, null,\n    React.createElement(\"path\", { d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" }),\n    React.createElement(\"path\", { d: \"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\" })));\nconst ZoomOutIcon = createIcon(\"ZoomOut\", React.createElement(\"path\", { d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\" }));\nconst ZoomButton = React.forwardRef(function ZoomButton({ zoomIn, onLoseFocus }, ref) {\n    const wasEnabled = React.useRef(false);\n    const wasFocused = React.useRef(false);\n    const { zoom, maxZoom, zoomIn: zoomInCallback, zoomOut: zoomOutCallback, disabled: zoomDisabled } = useZoom();\n    const { render } = useLightboxProps();\n    const disabled = zoomDisabled || (zoomIn ? zoom >= maxZoom : zoom <= 1);\n    React.useEffect(() => {\n        if (disabled && wasEnabled.current && wasFocused.current) {\n            onLoseFocus();\n        }\n        if (!disabled) {\n            wasEnabled.current = true;\n        }\n    }, [disabled, onLoseFocus]);\n    return (React.createElement(IconButton, { ref: ref, disabled: disabled, label: zoomIn ? \"Zoom in\" : \"Zoom out\", icon: zoomIn ? ZoomInIcon : ZoomOutIcon, renderIcon: zoomIn ? render.iconZoomIn : render.iconZoomOut, onClick: zoomIn ? zoomInCallback : zoomOutCallback, onFocus: () => {\n            wasFocused.current = true;\n        }, onBlur: () => {\n            wasFocused.current = false;\n        } }));\n});\n\nfunction ZoomButtonsGroup() {\n    const zoomInRef = React.useRef(null);\n    const zoomOutRef = React.useRef(null);\n    const { focus } = useController();\n    const focusSibling = React.useCallback((sibling) => {\n        var _a, _b;\n        if (!((_a = sibling.current) === null || _a === void 0 ? void 0 : _a.disabled)) {\n            (_b = sibling.current) === null || _b === void 0 ? void 0 : _b.focus();\n        }\n        else {\n            focus();\n        }\n    }, [focus]);\n    const focusZoomIn = React.useCallback(() => focusSibling(zoomInRef), [focusSibling]);\n    const focusZoomOut = React.useCallback(() => focusSibling(zoomOutRef), [focusSibling]);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(ZoomButton, { zoomIn: true, ref: zoomInRef, onLoseFocus: focusZoomOut }),\n        React.createElement(ZoomButton, { ref: zoomOutRef, onLoseFocus: focusZoomIn })));\n}\n\nfunction ZoomToolbarControl() {\n    const { render } = useLightboxProps();\n    const zoomRef = useZoom();\n    if (render.buttonZoom) {\n        return React.createElement(React.Fragment, null, render.buttonZoom(zoomRef));\n    }\n    return React.createElement(ZoomButtonsGroup, null);\n}\n\nfunction isResponsiveImageSlide(slide) {\n    var _a;\n    return (((_a = slide.srcSet) === null || _a === void 0 ? void 0 : _a.length) || 0) > 0;\n}\nfunction reducer({ current, preload }, { type, source }) {\n    switch (type) {\n        case \"fetch\":\n            if (!current) {\n                return { current: source };\n            }\n            return { current, preload: source };\n        case \"done\":\n            if (source === preload) {\n                return { current: source };\n            }\n            return { current, preload };\n        default:\n            throw new Error(UNKNOWN_ACTION_TYPE);\n    }\n}\nfunction ResponsiveImage(props) {\n    var _a, _b;\n    const [{ current, preload }, dispatch] = React.useReducer(reducer, {});\n    const { slide: image, rect, imageFit, render } = props;\n    const srcSet = image.srcSet.sort((a, b) => a.width - b.width);\n    const width = (_a = image.width) !== null && _a !== void 0 ? _a : srcSet[srcSet.length - 1].width;\n    const height = (_b = image.height) !== null && _b !== void 0 ? _b : srcSet[srcSet.length - 1].height;\n    const cover = isImageFitCover(image, imageFit);\n    const maxWidth = Math.max(...srcSet.map((x) => x.width));\n    const targetWidth = Math.min((cover ? Math.max : Math.min)(rect.width, width * (rect.height / height)), maxWidth);\n    const pixelDensity = devicePixelRatio();\n    const handleResize = useEventCallback(() => {\n        var _a;\n        const targetSource = (_a = srcSet.find((x) => x.width >= targetWidth * pixelDensity)) !== null && _a !== void 0 ? _a : srcSet[srcSet.length - 1];\n        if (!current || srcSet.findIndex((x) => x.src === current) < srcSet.findIndex((x) => x === targetSource)) {\n            dispatch({ type: \"fetch\", source: targetSource.src });\n        }\n    });\n    useLayoutEffect(handleResize, [rect.width, rect.height, pixelDensity, handleResize]);\n    const handlePreload = useEventCallback((currentPreload) => dispatch({ type: \"done\", source: currentPreload }));\n    const style = {\n        WebkitTransform: \"translateZ(0)\",\n    };\n    if (!cover) {\n        Object.assign(style, rect.width / rect.height < width / height\n            ? { width: \"100%\", height: \"auto\" }\n            : { width: \"auto\", height: \"100%\" });\n    }\n    return (React.createElement(React.Fragment, null,\n        preload && preload !== current && (React.createElement(ImageSlide, { key: \"preload\", ...props, slide: { ...image, src: preload, srcSet: undefined }, style: { position: \"absolute\", visibility: \"hidden\", ...style }, onLoad: () => handlePreload(preload), render: {\n                ...render,\n                iconLoading: () => null,\n                iconError: () => null,\n            } })),\n        current && (React.createElement(ImageSlide, { key: \"current\", ...props, slide: { ...image, src: current, srcSet: undefined }, style: style }))));\n}\n\nfunction ZoomWrapper({ render, slide, offset, rect }) {\n    var _a;\n    const [imageDimensions, setImageDimensions] = React.useState();\n    const zoomWrapperRef = React.useRef(null);\n    const { zoom, maxZoom, offsetX, offsetY, setZoomWrapper } = useZoom();\n    const { carousel, on } = useLightboxProps();\n    const { currentIndex } = useLightboxState();\n    useLayoutEffect(() => {\n        if (offset === 0) {\n            setZoomWrapper({ zoomWrapperRef, imageDimensions });\n            return () => setZoomWrapper(undefined);\n        }\n        return () => { };\n    }, [offset, imageDimensions, setZoomWrapper]);\n    let rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, { slide, offset, rect, zoom, maxZoom });\n    if (!rendered && isImageSlide(slide)) {\n        const slideProps = {\n            slide,\n            offset,\n            rect,\n            render,\n            imageFit: carousel.imageFit,\n            imageProps: carousel.imageProps,\n            onClick: offset === 0 ? () => { var _a; return (_a = on.click) === null || _a === void 0 ? void 0 : _a.call(on, { index: currentIndex }); } : undefined,\n        };\n        rendered = isResponsiveImageSlide(slide) ? (React.createElement(ResponsiveImage, { key: slide.src, ...slideProps, slide: slide, rect: offset === 0 ? { width: rect.width * zoom, height: rect.height * zoom } : rect })) : (React.createElement(ImageSlide, { key: slide.src, onLoad: (img) => setImageDimensions({ width: img.naturalWidth, height: img.naturalHeight }), ...slideProps }));\n    }\n    if (!rendered)\n        return null;\n    return (React.createElement(\"div\", { ref: zoomWrapperRef, className: clsx(cssClass(CLASS_FULLSIZE), cssClass(CLASS_FLEX_CENTER)), style: offset === 0\n            ? { transform: `scale(${zoom}) translateX(${offsetX}px) translateY(${offsetY}px)` }\n            : undefined }, rendered));\n}\n\nconst Zoom = ({ augment, addModule }) => {\n    augment(({ toolbar, render, zoom, ...restProps }) => ({\n        zoom: resolveZoomProps(zoom),\n        toolbar: addToolbarButton(toolbar, PLUGIN_ZOOM, React.createElement(ZoomToolbarControl, null)),\n        render: {\n            ...render,\n            slide: (props) => { var _a; return isImageSlide(props.slide) ? React.createElement(ZoomWrapper, { render: render, ...props }) : (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, props); },\n        },\n        ...restProps,\n    }));\n    addModule(createModule(PLUGIN_ZOOM, ZoomContextProvider));\n};\n\nexport { Zoom as default };\n","import React, { useState } from \"react\";\nimport images from \"../images/images.json\";\nimport { Gallery } from \"react-grid-gallery\";\nimport Lightbox from \"yet-another-react-lightbox\";\nimport \"yet-another-react-lightbox/styles.css\";\nimport Zoom from \"yet-another-react-lightbox/plugins/zoom\";\n\nconst GalleryPage = () => {\n\n  const [index, setIndex] = useState(-1);\n\n  const handleClick = (index, _) => setIndex(index);\n\n  const thumbswithSrc = images.map((image) => {\n    return {\n      ...image,\n      src: `https://raw.githubusercontent.com/Department-of-Decentralization/pb23-photos/main/thumbnails/${image.name}`,\n    };\n  });\n\n  const imagesWithSrc = images.map((image) => {\n    return {\n      src: `https://raw.githubusercontent.com/Department-of-Decentralization/pb23-photos/main/${image.name}`,\n    };\n  });\n\n  return (\n    <main className=\"my-24\">\n    <header className=\"text-center\">\n      <h1 className=\"font-bold\">Protocol Berg</h1>\n      <p className=\"italic text-center\">\n        The decentralized protocol and infrastructure conference.\n      </p>\n    </header>\n      <section>\n        <h2 className=\"font-bold\">Gallery</h2>\n        <p>\n          <a\n            href=\"https://www.antontal.com/\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n          Anton Tal\n          </a>\n          {\" \"}\n          helped us to document Protocol Berg's unique atmosphere and people.\n          If you like the photos, please consider sending Anton a donation to\n          {\" \"}\n          <code>antontal.eth</code>\n        </p>\n        <div>\n        <Gallery\n          images={thumbswithSrc}\n          onClick={handleClick}\n          enableImageSelection={false}\n          rowHeight={240}\n          margin={4}\n        />\n      </div>\n      <Lightbox\n        slides={imagesWithSrc}\n        open={index >= 0}\n        index={index}\n        close={() => setIndex(-1)}\n        animation={{ fade: 330, swipe: 250 }}\n        carousel={{\n          finite: false,\n          preload: 1,\n          padding: \"16px\",\n          spacing: \"30%\",\n          imageFit: \"contain\",\n        }}\n        plugins={[Zoom]}\n        zoom={{\n          maxZoomPixelRatio: 1,\n          zoomInMultiplier: 2,\n          doubleTapDelay: 300,\n          doubleClickDelay: 500,\n          doubleClickMaxStops: 2,\n          keyboardMoveDistance: 50,\n          wheelZoomDistanceFactor: 150,\n          pinchZoomDistanceFactor: 150,\n          scrollToZoom: false,\n        }}\n      />\n      <p>\n        Photos of the event were provided by{\" \"}\n        <a\n          href=\"https://www.antontal.com/\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n        Anton Tal\n        </a>.\n        Please consider leaving Anton a donation: <code>antontal.eth</code>\n      </p>\n      </section>\n      <p className=\"ml-12\">Back to <a href=\"/\">protocol.berlin</a></p>\n    </main>\n  )\n}\n\nexport default GalleryPage\n\nexport const Head = () => <title>Protocol Berg - Gallery</title>\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.ReactGridGallery = {}, global.React));\n})(this, (function (exports, require$$0) { 'use strict';\n\n    function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n    var require$$0__default = /*#__PURE__*/_interopDefaultLegacy(require$$0);\n\n    /******************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __spreadArray(to, from, pack) {\r\n        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n            if (ar || !(i in from)) {\r\n                if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n                ar[i] = from[i];\r\n            }\r\n        }\r\n        return to.concat(ar || Array.prototype.slice.call(from));\r\n    }\r\n\r\n    typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n        var e = new Error(message);\r\n        return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n    };\n\n    var jsxRuntime = {exports: {}};\n\n    var reactJsxRuntime_production_min = {};\n\n    /**\n     * @license React\n     * react-jsx-runtime.production.min.js\n     *\n     * Copyright (c) Facebook, Inc. and its affiliates.\n     *\n     * This source code is licensed under the MIT license found in the\n     * LICENSE file in the root directory of this source tree.\n     */\n\n    var hasRequiredReactJsxRuntime_production_min;\n\n    function requireReactJsxRuntime_production_min () {\n    \tif (hasRequiredReactJsxRuntime_production_min) return reactJsxRuntime_production_min;\n    \thasRequiredReactJsxRuntime_production_min = 1;\n    var f=require$$0__default[\"default\"],k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\n    \tfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return {$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;\n    \treturn reactJsxRuntime_production_min;\n    }\n\n    {\n      jsxRuntime.exports = requireReactJsxRuntime_production_min();\n    }\n\n    var jsxRuntimeExports = jsxRuntime.exports;\n\n    var getStyle = function (styleProp, fallback, context) {\r\n        if (typeof styleProp === \"function\") {\r\n            return styleProp(context);\r\n        }\r\n        if (typeof styleProp === \"object\") {\r\n            return styleProp;\r\n        }\r\n        return fallback(context);\r\n    };\r\n    var rotationTransformMap = {\r\n        3: \"rotate(180deg)\",\r\n        2: \"rotateY(180deg)\",\r\n        4: \"rotate(180deg) rotateY(180deg)\",\r\n        5: \"rotate(270deg) rotateY(180deg)\",\r\n        6: \"rotate(90deg)\",\r\n        7: \"rotate(90deg) rotateY(180deg)\",\r\n        8: \"rotate(270deg)\",\r\n    };\r\n    var SELECTION_MARGIN = 16;\r\n    var gallery = {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n    };\r\n    var thumbnail = function (_a) {\r\n        var item = _a.item;\r\n        var rotationTransformValue = rotationTransformMap[item.orientation];\r\n        var style = {\r\n            cursor: \"pointer\",\r\n            maxWidth: \"none\",\r\n            width: item.scaledWidth,\r\n            height: item.scaledHeight,\r\n            marginLeft: item.marginLeft,\r\n            marginTop: 0,\r\n            transform: rotationTransformValue,\r\n        };\r\n        if (item.isSelected) {\r\n            var ratio = item.scaledWidth / item.scaledHeight;\r\n            var viewportHeight = item.scaledHeight - SELECTION_MARGIN * 2;\r\n            var viewportWidth = item.viewportWidth - SELECTION_MARGIN * 2;\r\n            var height = void 0, width = void 0;\r\n            if (item.scaledWidth > item.scaledHeight) {\r\n                width = item.scaledWidth - SELECTION_MARGIN * 2;\r\n                height = Math.floor(width / ratio);\r\n            }\r\n            else {\r\n                height = item.scaledHeight - SELECTION_MARGIN * 2;\r\n                width = Math.floor(height * ratio);\r\n            }\r\n            var marginTop = Math.abs(Math.floor((viewportHeight - height) / 2));\r\n            var marginLeft = Math.abs(Math.floor((viewportWidth - width) / 2));\r\n            style.width = width;\r\n            style.height = height;\r\n            style.marginLeft = marginLeft === 0 ? 0 : -marginLeft;\r\n            style.marginTop = marginTop === 0 ? 0 : -marginTop;\r\n        }\r\n        return style;\r\n    };\r\n    var tileViewport = function (_a) {\r\n        var item = _a.item;\r\n        var styles = {\r\n            width: item.viewportWidth,\r\n            height: item.scaledHeight,\r\n            overflow: \"hidden\",\r\n        };\r\n        if (item.nano) {\r\n            styles.background = \"url(\".concat(item.nano, \")\");\r\n            styles.backgroundSize = \"cover\";\r\n            styles.backgroundPosition = \"center center\";\r\n        }\r\n        if (item.isSelected) {\r\n            styles.width = item.viewportWidth - SELECTION_MARGIN * 2;\r\n            styles.height = item.scaledHeight - SELECTION_MARGIN * 2;\r\n            styles.margin = SELECTION_MARGIN;\r\n        }\r\n        return styles;\r\n    };\r\n    var customOverlay = function (_a) {\r\n        var hover = _a.hover;\r\n        return ({\r\n            pointerEvents: \"none\",\r\n            opacity: hover ? 1 : 0,\r\n            position: \"absolute\",\r\n            height: \"100%\",\r\n            width: \"100%\",\r\n        });\r\n    };\r\n    var galleryItem = function (_a) {\r\n        var margin = _a.margin;\r\n        return ({\r\n            margin: margin,\r\n            WebkitUserSelect: \"none\",\r\n            position: \"relative\",\r\n            background: \"#eee\",\r\n            padding: \"0px\",\r\n        });\r\n    };\r\n    var tileOverlay = function (_a) {\r\n        var showOverlay = _a.showOverlay;\r\n        return ({\r\n            pointerEvents: \"none\",\r\n            opacity: 1,\r\n            position: \"absolute\",\r\n            height: \"100%\",\r\n            width: \"100%\",\r\n            background: showOverlay\r\n                ? \"linear-gradient(to bottom,rgba(0,0,0,0.26),transparent 56px,transparent)\"\r\n                : \"none\",\r\n        });\r\n    };\r\n    var tileIconBar = {\r\n        pointerEvents: \"none\",\r\n        opacity: 1,\r\n        position: \"absolute\",\r\n        height: \"36px\",\r\n        width: \"100%\",\r\n    };\r\n    var tileDescription = {\r\n        background: \"white\",\r\n        width: \"100%\",\r\n        margin: 0,\r\n        userSelect: \"text\",\r\n        WebkitUserSelect: \"text\",\r\n        MozUserSelect: \"text\",\r\n        overflow: \"hidden\",\r\n    };\r\n    var bottomBar = {\r\n        padding: \"2px\",\r\n        pointerEvents: \"none\",\r\n        position: \"absolute\",\r\n        minHeight: \"0px\",\r\n        maxHeight: \"160px\",\r\n        width: \"100%\",\r\n        bottom: \"0px\",\r\n        overflow: \"hidden\",\r\n    };\r\n    var tagItemBlock = {\r\n        display: \"inline-block\",\r\n        cursor: \"pointer\",\r\n        pointerEvents: \"visible\",\r\n        margin: \"2px\",\r\n    };\r\n    var tagItem = function () { return ({\r\n        display: \"inline\",\r\n        padding: \".2em .6em .3em\",\r\n        fontSize: \"75%\",\r\n        fontWeight: \"600\",\r\n        lineHeight: \"1\",\r\n        color: \"yellow\",\r\n        background: \"rgba(0,0,0,0.65)\",\r\n        textAlign: \"center\",\r\n        whiteSpace: \"nowrap\",\r\n        verticalAlign: \"baseline\",\r\n        borderRadius: \".25em\",\r\n    }); };\r\n    var checkButton = function (_a) {\r\n        var isVisible = _a.isVisible;\r\n        return ({\r\n            visibility: isVisible ? \"visible\" : \"hidden\",\r\n            background: \"none\",\r\n            float: \"left\",\r\n            width: 36,\r\n            height: 36,\r\n            border: \"none\",\r\n            padding: 6,\r\n            cursor: \"pointer\",\r\n            pointerEvents: \"visible\",\r\n        });\r\n    };\n\n    var CheckButton = function (_a) {\r\n        var _b = _a.isSelected, isSelected = _b === void 0 ? false : _b, _c = _a.isVisible, isVisible = _c === void 0 ? true : _c, onClick = _a.onClick, _d = _a.color, color = _d === void 0 ? \"#FFFFFFB2\" : _d, _e = _a.selectedColor, selectedColor = _e === void 0 ? \"#4285F4FF\" : _e, _f = _a.hoverColor, hoverColor = _f === void 0 ? \"#FFFFFFFF\" : _f;\r\n        var _g = require$$0.useState(false), hover = _g[0], setHover = _g[1];\r\n        var circleStyle = { display: isSelected ? \"block\" : \"none\" };\r\n        var fillColor = isSelected ? selectedColor : hover ? hoverColor : color;\r\n        var handleMouseOver = function () { return setHover(true); };\r\n        var handleMouseOut = function () { return setHover(false); };\r\n        return (jsxRuntimeExports.jsx(\"div\", __assign({ \"data-testid\": \"grid-gallery-item_check-button\", title: \"Select\", style: checkButton({ isVisible: isVisible }), onClick: onClick, onMouseOver: handleMouseOver, onMouseOut: handleMouseOut }, { children: jsxRuntimeExports.jsxs(\"svg\", __assign({ fill: fillColor, height: \"24\", viewBox: \"0 0 24 24\", width: \"24\", xmlns: \"http://www.w3.org/2000/svg\" }, { children: [jsxRuntimeExports.jsxs(\"radialGradient\", __assign({ id: \"shadow\", cx: \"38\", cy: \"95.488\", r: \"10.488\", gradientTransform: \"matrix(1 0 0 -1 -26 109)\", gradientUnits: \"userSpaceOnUse\" }, { children: [jsxRuntimeExports.jsx(\"stop\", { offset: \".832\", stopColor: \"#010101\" }), jsxRuntimeExports.jsx(\"stop\", { offset: \"1\", stopColor: \"#010101\", stopOpacity: \"0\" })] })), jsxRuntimeExports.jsx(\"circle\", { style: circleStyle, opacity: \".26\", fill: \"url(#shadow)\", cx: \"12\", cy: \"13.512\", r: \"10.488\" }), jsxRuntimeExports.jsx(\"circle\", { style: circleStyle, fill: \"#FFF\", cx: \"12\", cy: \"12.2\", r: \"8.292\" }), jsxRuntimeExports.jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), jsxRuntimeExports.jsx(\"path\", { d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\" })] })) })));\r\n    };\n\n    var Image = function (_a) {\r\n        var item = _a.item, ThumbnailImageComponent = _a.thumbnailImageComponent, _b = _a.isSelectable, isSelectable = _b === void 0 ? true : _b, thumbnailStyle = _a.thumbnailStyle, tagStyle = _a.tagStyle, tileViewportStyle = _a.tileViewportStyle, margin = _a.margin, index = _a.index, onSelect = _a.onSelect, onClick = _a.onClick;\r\n        var styleContext = { item: item };\r\n        var _c = require$$0.useState(false), hover = _c[0], setHover = _c[1];\r\n        var thumbnailProps = {\r\n            key: index,\r\n            \"data-testid\": \"grid-gallery-item_thumbnail\",\r\n            src: item.src,\r\n            alt: item.alt ? item.alt : \"\",\r\n            title: typeof item.caption === \"string\" ? item.caption : null,\r\n            style: getStyle(thumbnailStyle, thumbnail, styleContext),\r\n        };\r\n        var handleCheckButtonClick = function (event) {\r\n            if (!isSelectable) {\r\n                return;\r\n            }\r\n            onSelect(index, event);\r\n        };\r\n        var handleViewportClick = function (event) {\r\n            onClick(index, event);\r\n        };\r\n        var thumbnailImageProps = {\r\n            item: item,\r\n            index: index,\r\n            margin: margin,\r\n            onSelect: onSelect,\r\n            onClick: onClick,\r\n            isSelectable: isSelectable,\r\n            tileViewportStyle: tileViewportStyle,\r\n            thumbnailStyle: thumbnailStyle,\r\n            tagStyle: tagStyle,\r\n        };\r\n        return (jsxRuntimeExports.jsxs(\"div\", __assign({ className: \"ReactGridGallery_tile\", \"data-testid\": \"grid-gallery-item\", onMouseEnter: function () { return setHover(true); }, onMouseLeave: function () { return setHover(false); }, style: galleryItem({ margin: margin }) }, { children: [jsxRuntimeExports.jsx(\"div\", __assign({ className: \"ReactGridGallery_tile-icon-bar\", style: tileIconBar }, { children: jsxRuntimeExports.jsx(CheckButton, { isSelected: item.isSelected, isVisible: item.isSelected || (isSelectable && hover), onClick: handleCheckButtonClick }) })), !!item.tags && (jsxRuntimeExports.jsx(\"div\", __assign({ className: \"ReactGridGallery_tile-bottom-bar\", style: bottomBar }, { children: item.tags.map(function (tag, index) { return (jsxRuntimeExports.jsx(\"div\", __assign({ title: tag.title, style: tagItemBlock }, { children: jsxRuntimeExports.jsx(\"span\", __assign({ style: getStyle(tagStyle, tagItem, styleContext) }, { children: tag.value })) }), tag.key || index)); }) }))), !!item.customOverlay && (jsxRuntimeExports.jsx(\"div\", __assign({ className: \"ReactGridGallery_custom-overlay\", style: customOverlay({ hover: hover }) }, { children: item.customOverlay }))), jsxRuntimeExports.jsx(\"div\", { className: \"ReactGridGallery_tile-overlay\", style: tileOverlay({\r\n                        showOverlay: hover && !item.isSelected && isSelectable,\r\n                    }) }), jsxRuntimeExports.jsx(\"div\", __assign({ className: \"ReactGridGallery_tile-viewport\", \"data-testid\": \"grid-gallery-item_viewport\", style: getStyle(tileViewportStyle, tileViewport, styleContext), onClick: handleViewportClick }, { children: ThumbnailImageComponent ? (jsxRuntimeExports.jsx(ThumbnailImageComponent, __assign({}, thumbnailImageProps, { imageProps: thumbnailProps }))) : (jsxRuntimeExports.jsx(\"img\", __assign({}, thumbnailProps))) })), item.thumbnailCaption && (jsxRuntimeExports.jsx(\"div\", __assign({ className: \"ReactGridGallery_tile-description\", style: tileDescription }, { children: item.thumbnailCaption })))] })));\r\n    };\n\n    function useContainerWidth(defaultContainerWidth) {\r\n        var ref = require$$0.useRef(null);\r\n        var observerRef = require$$0.useRef();\r\n        var _a = require$$0.useState(defaultContainerWidth), containerWidth = _a[0], setContainerWidth = _a[1];\r\n        var containerRef = require$$0.useCallback(function (node) {\r\n            var _a;\r\n            (_a = observerRef.current) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n            observerRef.current = undefined;\r\n            ref.current = node;\r\n            var updateWidth = function () {\r\n                if (!ref.current) {\r\n                    return;\r\n                }\r\n                var width = ref.current.clientWidth;\r\n                try {\r\n                    width = ref.current.getBoundingClientRect().width;\r\n                }\r\n                catch (err) { }\r\n                setContainerWidth(Math.floor(width));\r\n            };\r\n            updateWidth();\r\n            if (node && typeof ResizeObserver !== \"undefined\") {\r\n                observerRef.current = new ResizeObserver(updateWidth);\r\n                observerRef.current.observe(node);\r\n            }\r\n        }, []);\r\n        return { containerRef: containerRef, containerWidth: containerWidth };\r\n    }\n\n    var calculateCutOff = function (items, totalRowWidth, protrudingWidth) {\r\n        var cutOff = [];\r\n        var cutSum = 0;\r\n        for (var i in items) {\r\n            var item = items[i];\r\n            var fractionOfWidth = item.scaledWidth / totalRowWidth;\r\n            cutOff[i] = Math.floor(fractionOfWidth * protrudingWidth);\r\n            cutSum += cutOff[i];\r\n        }\r\n        var stillToCutOff = protrudingWidth - cutSum;\r\n        while (stillToCutOff > 0) {\r\n            for (var i in cutOff) {\r\n                cutOff[i]++;\r\n                stillToCutOff--;\r\n                if (stillToCutOff < 0)\r\n                    break;\r\n            }\r\n        }\r\n        return cutOff;\r\n    };\r\n    var getRow = function (images, _a) {\r\n        var containerWidth = _a.containerWidth, rowHeight = _a.rowHeight, margin = _a.margin;\r\n        var row = [];\r\n        var imgMargin = 2 * margin;\r\n        var items = __spreadArray([], images, true);\r\n        var totalRowWidth = 0;\r\n        while (items.length > 0 && totalRowWidth < containerWidth) {\r\n            var item = items.shift();\r\n            var scaledWidth = Math.floor(rowHeight * (item.width / item.height));\r\n            var extendedItem = __assign(__assign({}, item), { scaledHeight: rowHeight, scaledWidth: scaledWidth, viewportWidth: scaledWidth, marginLeft: 0 });\r\n            row.push(extendedItem);\r\n            totalRowWidth += extendedItem.scaledWidth + imgMargin;\r\n        }\r\n        var protrudingWidth = totalRowWidth - containerWidth;\r\n        if (row.length > 0 && protrudingWidth > 0) {\r\n            var cutoff = calculateCutOff(row, totalRowWidth, protrudingWidth);\r\n            for (var i in row) {\r\n                var pixelsToRemove = cutoff[i];\r\n                var item = row[i];\r\n                item.marginLeft = -Math.abs(Math.floor(pixelsToRemove / 2));\r\n                item.viewportWidth = item.scaledWidth - pixelsToRemove;\r\n            }\r\n        }\r\n        return [row, items];\r\n    };\r\n    var getRows = function (images, options, rows) {\r\n        if (rows === void 0) { rows = []; }\r\n        var _a = getRow(images, options), row = _a[0], imagesLeft = _a[1];\r\n        var nextRows = __spreadArray(__spreadArray([], rows, true), [row], false);\r\n        if (options.maxRows && nextRows.length >= options.maxRows) {\r\n            return nextRows;\r\n        }\r\n        if (imagesLeft.length) {\r\n            return getRows(imagesLeft, options, nextRows);\r\n        }\r\n        return nextRows;\r\n    };\r\n    var buildLayout = function (images, _a) {\r\n        var containerWidth = _a.containerWidth, maxRows = _a.maxRows, rowHeight = _a.rowHeight, margin = _a.margin;\r\n        rowHeight = typeof rowHeight === \"undefined\" ? 180 : rowHeight;\r\n        margin = typeof margin === \"undefined\" ? 2 : margin;\r\n        if (!images)\r\n            return [];\r\n        if (!containerWidth)\r\n            return [];\r\n        var options = { containerWidth: containerWidth, maxRows: maxRows, rowHeight: rowHeight, margin: margin };\r\n        return getRows(images, options);\r\n    };\r\n    var buildLayoutFlat = function (images, options) {\r\n        var rows = buildLayout(images, options);\r\n        return [].concat.apply([], rows);\r\n    };\n\n    var Gallery = function (_a) {\r\n        var images = _a.images, _b = _a.id, id = _b === void 0 ? \"ReactGridGallery\" : _b, _c = _a.enableImageSelection, enableImageSelection = _c === void 0 ? true : _c, _d = _a.onSelect, onSelect = _d === void 0 ? function () { } : _d, _e = _a.rowHeight, rowHeight = _e === void 0 ? 180 : _e, maxRows = _a.maxRows, _f = _a.margin, margin = _f === void 0 ? 2 : _f, _g = _a.defaultContainerWidth, defaultContainerWidth = _g === void 0 ? 0 : _g, _h = _a.onClick, onClick = _h === void 0 ? function () { } : _h, tileViewportStyle = _a.tileViewportStyle, thumbnailStyle = _a.thumbnailStyle, tagStyle = _a.tagStyle, thumbnailImageComponent = _a.thumbnailImageComponent;\r\n        var _j = useContainerWidth(defaultContainerWidth), containerRef = _j.containerRef, containerWidth = _j.containerWidth;\r\n        var thumbnails = buildLayoutFlat(images, {\r\n            containerWidth: containerWidth,\r\n            maxRows: maxRows,\r\n            rowHeight: rowHeight,\r\n            margin: margin,\r\n        });\r\n        var handleSelect = function (index, event) {\r\n            event.preventDefault();\r\n            onSelect(index, images[index], event);\r\n        };\r\n        var handleClick = function (index, event) {\r\n            onClick(index, images[index], event);\r\n        };\r\n        return (jsxRuntimeExports.jsx(\"div\", __assign({ id: id, className: \"ReactGridGallery\", ref: containerRef }, { children: jsxRuntimeExports.jsx(\"div\", __assign({ style: gallery }, { children: thumbnails.map(function (item, index) { return (jsxRuntimeExports.jsx(Image, { item: item, index: index, margin: margin, height: rowHeight, isSelectable: enableImageSelection, onClick: handleClick, onSelect: handleSelect, tagStyle: tagStyle, tileViewportStyle: tileViewportStyle, thumbnailStyle: thumbnailStyle, thumbnailImageComponent: thumbnailImageComponent }, item.key || index)); }) })) })));\r\n    };\r\n    Gallery.displayName = \"Gallery\";\n\n    exports.CheckButton = CheckButton;\n    exports.Gallery = Gallery;\n    exports.buildLayout = buildLayout;\n    exports.buildLayoutFlat = buildLayoutFlat;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=react-grid-gallery.umd.js.map\n"],"names":["MODULE_CAROUSEL","MODULE_CONTROLLER","MODULE_PORTAL","MODULE_TOOLBAR","PLUGIN_ZOOM","SLIDE_STATUS_LOADING","SLIDE_STATUS_ERROR","SLIDE_STATUS_COMPLETE","SLIDE_STATUS_PLACEHOLDER","activeSlideStatus","status","CLASS_FULLSIZE","CLASS_FLEX_CENTER","CLASS_NO_SCROLL_PADDING","ACTION_PREV","ACTION_NEXT","ACTION_SWIPE","ACTION_CLOSE","EVENT_ON_POINTER_DOWN","EVENT_ON_POINTER_MOVE","EVENT_ON_POINTER_UP","EVENT_ON_POINTER_LEAVE","EVENT_ON_POINTER_CANCEL","EVENT_ON_KEY_DOWN","EVENT_ON_KEY_UP","EVENT_ON_WHEEL","VK_ESCAPE","VK_ARROW_LEFT","VK_ARROW_RIGHT","ELEMENT_ICON","IMAGE_FIT_CONTAIN","IMAGE_FIT_COVER","UNKNOWN_ACTION_TYPE","LightboxDefaultProps","open","close","index","slides","render","plugins","toolbar","buttons","labels","animation","fade","swipe","easing","navigation","carousel","finite","preload","padding","spacing","imageFit","imageProps","controller","ref","focus","aria","touchAction","closeOnPullDown","closeOnBackdropClick","portal","noScroll","disabled","on","styles","className","createModule","name","component","createNode","module","children","traverseNode","node","target","apply","flatMap","n","_a","traverse","nodes","clsx","classes","filter","cls","Boolean","join","cssPrefix$3","cssClass","cssVar","composePrefix","base","prefix","makeComposePrefix","label","lbl","cleanup","cleaners","forEach","cleaner","makeUseContext","contextName","context","ctx","Error","hasWindow","window","round","value","decimals","factor","Math","Number","EPSILON","isImageSlide","slide","undefined","type","isImageFitCover","image","parseLengthPercentage","input","pixel","parseInt","endsWith","percent","computeSlideRect","containerRect","paddingValue","paddingPixels","width","max","height","devicePixelRatio","getSlideIndex","slidesCount","hasSlides","length","getSlideIfPresent","getSlide","addToolbarButton","key","button","restToolbar","findIndex","item","buttonWithKey","result","splice","stopNavigationEventsPropagation","stopPropagation","event","onPointerDown","onKeyDown","onWheel","EventsContext","useEvents","EventsProvider","subscriptions","Object","keys","topic","unsubscribe","callback","cb","publish","subscribe","push","Provider","LightboxPropsContext","useLightboxProps","LightboxPropsProvider","props","LightboxStateContext","useLightboxState","LightboxDispatchContext","useLightboxDispatch","reducer","state","action","increment","globalIndex","currentIndex","currentSlide","duration","LightboxStateProvider","dispatch","TimeoutsContext","useTimeouts","TimeoutsProvider","timeouts","tid","clearTimeout","removeTimeout","id","setTimeout","fn","delay","IconButton","label$1","icon","Icon","renderIcon","onClick","style","rest","svgIcon","xmlns","viewBox","focusable","displayName","createIcon","glyph","fill","d","CloseIcon","PreviousIcon","NextIcon","LoadingIcon","Array","from","map","_","array","x1","y1","x2","y2","strokeLinecap","strokeWidth","stroke","strokeOpacity","transform","ErrorIcon","useLayoutEffect","useMotionPreference","reduceMotion","setReduceMotion","_b","mediaQuery","matchMedia","call","matches","listener","addEventListener","removeEventListener","useAnimation","nodeRef","computeAnimation","snapshot","_c","current","keyframes","onfinish","getBoundingClientRect","x","y","z","matcher","getComputedStyle","match","values","split","str","currentTransformation","cancel","animate","err","console","error","prepareAnimation","currentSnapshot","isAnimationPlaying","playState","useContainerRect","containerRef","observerRef","setContainerRect","setContainerRef","disconnect","updateContainerRect","parse","parseFloat","clientWidth","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","ResizeObserver","observe","useDelay","timeoutId","useEventCallback","args","setRef","useForkRef","refA","refB","refValue","useLoseFocus","focused","onFocus","onBlur","useRTL","isRTL","setIsRTL","document","documentElement","direction","useThrottle","lastCallbackTime","delayCallback","executeCallback","Date","now","slidePrefix","slideImagePrefix","ImageSlide","offset","rect","onLoad","_d","_e","_f","_g","setStatus","imageRef","handleLoading","img","decode","Promise","resolve","catch","then","parentNode","setImageRef","complete","handleOnLoad","currentTarget","onError","cover","nonInfinite","fallback","isFinite","maxWidth","srcSet","concat","naturalWidth","maxHeight","naturalHeight","defaultStyle","sort","a","b","src","sizes","min","MAX_VALUE","imagePropsStyle","imagePropsClassName","restImageProps","draggable","alt","iconLoading","iconError","SwipeState","Gesture","usePointerEvents","subscribeSensors","onPointerMove","onPointerUp","SWIPE_THRESHOLD","WHEEL","preventDefault","abs","deltaX","deltaY","ctrlKey","cssContainerPrefix","ControllerContext","useController","ControllerModule","toolbarWidth","setToolbarWidth","swipeState","setSwipeState","NONE","swipeOffset","pullDownOffset","pullDownOpacity","registerSensors","subscribers","notifySubscribers","isPropagationStopped","onPointerLeave","onPointerCancel","onKeyUp","unshift","listeners","el","useSensors","cleanupAnimationIncrement","cleanupSwipeOffset","cleanupPullDownOffset","handleContainerRef","passive","usePreventSwipeNavigation","carouselRef","setCarouselRef","rtl","getLightboxProps","getLightboxState","prev","params","next","isSwipeValid","setSwipeOffset","setProperty","setPullDownOffset","preparePullDownAnimation","translate","opacity","pullDown","ANIMATION","parsedSpacing","spacingValue","currentSwipeOffset","swipeDuration","swipeEasing","count","newSwipeState","newSwipeAnimationDuration","containerWidth","elapsedTime","expectedTime","swipeParams","SWIPE","pullDownParams","PULL_DOWN","swipeAnimationDuration","onSwipeStart","onSwipeProgress","onSwipeFinish","onSwipeCancel","pullDownEnabled","onPullDownStart","onPullDownProgress","onPullDownFinish","onPullDownCancel","pointers","activePointer","startTime","gesture","clearPointer","pointerId","currentPointers","p","addPointer","persist","find","currentOffset","pointer","isCurrentPointer","clientX","clientY","startGesture","newGesture","usePointerSwipe","intent","intentCleanup","resetCleanup","wheelResidualMomentum","cancelSwipeIntentCleanup","cancelSwipeResetCleanup","handleCleanup","handleCancelSwipe","currentSwipeIntent","newSwipeOffset","sign","useWheelSwipe","focusOnMount","onViewCallback","view","slideRect","container","role","tabIndex","controls","cssPrefix$2","cssSlidePrefix","CarouselSlide","click","HTMLElement","classList","contains","rendered","slideHeader","slideContainer","slideFooter","renderSlide","Placeholder","CarouselModule","items","minimum","floor","calculatePreload","i","useNavigationState","prevDisabled","nextDisabled","NavigationButton","NavigationModule","buttonPrev","buttonNext","iconPrev","iconNext","throttle","handleKeyDown","useKeyboardNavigation","navigationPrev","navigationNext","noScrollPadding","isHTMLElement","element","padScrollbar","property","computedValue","originalValue","getPropertyValue","removeProperty","NoScrollModule","body","scrollbar","innerWidth","elements","getElementsByTagName","add","remove","clean","cssPrefix$1","setAttribute","attribute","previousValue","getAttribute","removeAttribute","PortalModule","mounted","setMounted","visible","setVisible","animationDuration","handleClose","exiting","exited","handleEnter","scrollTop","entering","indexOf","tagName","entered","handleExit","handleRef","createPortal","root","RootModule","ToolbarModule","buttonClose","iconClose","renderNode","child","mergeAnimation","defaultAnimation","defaultAnimationEasing","restDefaultAnimation","restAnimation","Lightbox","restProps","defaultCarousel","defaultRender","defaultToolbar","defaultController","defaultNoScroll","defaultOn","defaultSlides","defaultIndex","defaultPlugins","restDefaultProps","config","augmentation","augmentations","pop","addParent","append","addChild","precede","addSibling","addModule","replace","augment","plugin","reduce","acc","withPlugins","defaultZoomProps","maxZoomPixelRatio","zoomInMultiplier","doubleTapDelay","doubleClickDelay","doubleClickMaxStops","keyboardMoveDistance","wheelZoomDistanceFactor","pinchZoomDistanceFactor","scrollToZoom","resolveZoomProps","zoom","useZoomProps","distance","pointerA","pointerB","useZoomState","imageRect","maxZoom","zoomWrapperRef","setZoom","offsetX","setOffsetX","offsetY","setOffsetY","zoomAnimation","zoomAnimationStart","zoomAnimationDuration","playZoomAnimation","useZoomAnimation","currentSource","getCurrentSource","changeOffsets","dx","dy","targetZoom","newZoom","newOffsetX","newOffsetY","maxOffsetX","maxOffsetY","changeZoom","rapid","handleControllerRectChange","zoomIn","zoomOut","ZoomControllerContext","useZoom","ZoomContextProvider","zoomWrapper","setZoomWrapper","imageDimensions","maxImageRect","useZoomImageRect","onZoomCallback","useZoomCallback","activePointers","lastPointerDown","pinchZoomDistance","translateCoordinates","pageX","pageY","scrollX","scrollY","left","top","move","handleChangeZoom","zoomValue","hasMeta","getModifierState","replacePointer","timeStamp","pointerType","currentDistance","delta","coordinate","cleanupSensors","useZoomSensors","zoomRef","ZoomInIcon","ZoomOutIcon","ZoomButton","onLoseFocus","wasEnabled","wasFocused","zoomInCallback","zoomOutCallback","zoomDisabled","iconZoomIn","iconZoomOut","ZoomButtonsGroup","zoomInRef","zoomOutRef","focusSibling","sibling","focusZoomIn","focusZoomOut","ZoomToolbarControl","buttonZoom","source","ResponsiveImage","targetWidth","pixelDensity","handleResize","targetSource","handlePreload","currentPreload","WebkitTransform","assign","position","visibility","ZoomWrapper","setImageDimensions","slideProps","isResponsiveImageSlide","Zoom","setIndex","useState","thumbswithSrc","images","imagesWithSrc","href","rel","Gallery","enableImageSelection","rowHeight","margin","Head","exports","require$$0","_interopDefaultLegacy","e","require$$0__default","__assign","t","s","arguments","prototype","hasOwnProperty","this","__spreadArray","to","pack","ar","l","slice","SuppressedError","hasRequiredReactJsxRuntime_production_min","jsxRuntime","reactJsxRuntime_production_min","requireReactJsxRuntime_production_min","f","k","Symbol","for","m","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","__self","__source","q","c","g","h","defaultProps","$$typeof","_owner","Fragment","jsx","jsxs","jsxRuntimeExports","getStyle","styleProp","rotationTransformMap","SELECTION_MARGIN","gallery","display","flexWrap","thumbnail","rotationTransformValue","orientation","cursor","scaledWidth","scaledHeight","marginLeft","marginTop","isSelected","ratio","viewportHeight","viewportWidth","tileViewport","overflow","nano","background","backgroundSize","backgroundPosition","customOverlay","pointerEvents","hover","galleryItem","WebkitUserSelect","tileOverlay","showOverlay","tileIconBar","tileDescription","userSelect","MozUserSelect","bottomBar","minHeight","bottom","tagItemBlock","tagItem","fontSize","fontWeight","lineHeight","color","textAlign","whiteSpace","verticalAlign","borderRadius","checkButton","isVisible","float","border","CheckButton","selectedColor","hoverColor","setHover","circleStyle","fillColor","handleMouseOver","handleMouseOut","title","onMouseOver","onMouseOut","cx","cy","r","gradientTransform","gradientUnits","stopColor","stopOpacity","Image","ThumbnailImageComponent","thumbnailImageComponent","isSelectable","thumbnailStyle","tagStyle","tileViewportStyle","onSelect","styleContext","thumbnailProps","caption","handleCheckButtonClick","handleViewportClick","thumbnailImageProps","onMouseEnter","onMouseLeave","tags","tag","thumbnailCaption","useContainerWidth","defaultContainerWidth","useRef","setContainerWidth","useCallback","updateWidth","calculateCutOff","totalRowWidth","protrudingWidth","cutOff","cutSum","fractionOfWidth","stillToCutOff","getRow","row","imgMargin","shift","extendedItem","cutoff","pixelsToRemove","getRows","options","rows","imagesLeft","nextRows","maxRows","buildLayout","buildLayoutFlat","_h","_j","thumbnails","handleSelect","handleClick","defineProperty","factory"],"sourceRoot":""}